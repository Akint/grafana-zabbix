define(["react","lodash","moment","app/plugins/sdk","react-dom","angular","app/core/utils/datemath"],function(e,t,n,r,a,o,i){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=53)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
                                                                                                                                                                                                                                                                                         Copyright (c) 2017 Jed Watson.
                                                                                                                                                                                                                                                                                         Licensed under the MIT License (MIT), see
                                                                                                                                                                                                                                                                                         http://jedwatson.github.io/classnames
                                                                                                                                                                                                                                                                                       */
!function(){var o={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=void 0===n?"undefined":a(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var l=i.apply(null,n);l&&e.push(l)}else if("object"===r)for(var s in n)o.call(n,s)&&n[s]&&e.push(s)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):"object"===a(n(30))&&n(30)?void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r):window.classNames=i}()},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexPattern=void 0,t.expandItemName=i,t.expandItems=function(e){return r.default.forEach(e,function(e){return e.item=e.name,e.name=i(e.item,e.key_),e}),e},t.containsMacro=function(e){return l.test(e)},t.replaceMacro=function(e,t){var n=e.name,a=n.match(l);return r.default.forEach(a,function(a){var o=r.default.filter(t,function(t){return!t.hostid||t.hostid===e.hostid}),i=r.default.find(o,{macro:a});if(i&&i.value){var l=i.value,s=new RegExp(function(e){return e=e.replace(/\$/,"\\$")}(a));n=n.replace(s,l)}}),n},t.splitTemplateQuery=function(e){var t=void 0;if(function(e){return/^\{.+\}$/.test(e)}(e)){var n=e.match(/\{[^\{\}]*\}|\{\/.*\/\}/g);t=r.default.map(n,function(e){return r.default.trim(e,"{}")})}else t=e.split(".");return t},t.isRegex=function(e){return s.test(e)},t.isTemplateVariable=function(e,t){if(/^\$\w+/.test(e)){var n=r.default.map(t,function(e){return"$"+e.name});return r.default.includes(n,e)}return!1},t.buildRegex=function(e){var t=e.match(s),n=t[1],r=""!==t[2]?t[2]:void 0;return new RegExp(n,r)},t.escapeRegex=function(e){return e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")},t.parseInterval=function(e){var t=/(^[\d]+)(y|M|w|d|h|m|s)/g.exec(e);return a.default.duration(Number(t[1]),t[2]).valueOf()},t.parseTimeShiftInterval=function(e){var t=/^([\+\-]*)([\d]+)(y|M|w|d|h|m|s)/g.exec(e),n=0;n="+"===t[1]?0-a.default.duration(Number(t[2]),t[3]).valueOf():a.default.duration(Number(t[2]),t[3]).valueOf();return n},t.formatAcknowledges=function(e){if(e.length){var t="<br><br>Acknowledges:<br><table><tr><td><b>Time</b></td><td><b>User</b></td><td><b>Comments</b></td></tr>";return r.default.each(r.default.map(e,function(e){var t=a.default.unix(e.clock);return"<tr><td><i>"+t.format("DD MMM YYYY HH:mm:ss")+"</i></td><td>"+e.alias+" ("+e.name+" "+e.surname+")</td><td>"+e.message+"</td></tr>"}),function(e){t=t.concat(e)}),t=t.concat("</table>")}return""},t.convertToZabbixAPIUrl=function(e){return e.match(/.*api_jsonrpc.php$/)?e:e.replace(/(.*?)[\/]*$/,"$1")},t.callOnce=function(e,t){return function(){return t||(t=Promise.resolve(e.apply(this,arguments).then(function(e){return t=null,e}))),t}},t.sequence=function(e){return function(t){for(var n=0;n<e.length;n++)t=e[n].call(this,t);return t}},t.isValidVersion=function(e){return u.exec(e)},t.parseVersion=function(e){var t=u.exec(e);if(!t)return null;var n=Number(t[1]),r=Number(t[2]||0),a=Number(t[3]||0),o=t[4];return{major:n,minor:r,patch:a,meta:o}},t.compactQuery=function(e){return e.replace(/\s+/g," ").trim()};var r=o(n(1)),a=o(n(3));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n=function(e){var t=[],n=!1,a=!1,o="";return r.default.forEach(e,function(e){'"'===e&&a?o+=e:'"'===e&&n?n=!1:'"'!==e||n?"["!==e||n?"]"!==e||n?","!==e||n||a?o+=e:(t.push(o),o=""):a=!1:a=!0:n=!0}),t.push(o),t}(t.substring(t.indexOf("[")+1,t.lastIndexOf("]"))),a=n.length;a>=1;a--)e=e.replace("$"+a,n[a-1]);return e}var l=/{\$[A-Z0-9_\.]+}/g;var s=t.regexPattern=/^\/(.*)\/([gmi]*)$/m;var u=/^(\d+)(?:\.(\d+))?(?:\.(\d+))?(?:-([0-9A-Za-z\.]+))?/;r.default.includes||(r.default.includes=r.default.contains)},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(2),i=n.n(o),l=n(7),s=n.n(l),u=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(e){function t(t){var n=e.call(this,t)||this;n.node=document.createElement("div");var r=n.props,a=r.className,o=r.root,i=void 0===o?document.body:o;return a&&n.node.classList.add(a),n.portalRoot=i,n.portalRoot.appendChild(n.node),n}return u(t,e),t.prototype.componentWillUnmount=function(){this.portalRoot.removeChild(this.node)},t.prototype.render=function(){return s.a.createPortal(this.props.children,this.node)},t}(r.PureComponent),f=n(15),p=n(33),d=n.n(p),h=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g={transition:"opacity 200ms linear",opacity:0},v={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0}},y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.renderContent,r=e.show,o=e.placement,l=e.refClassName,s=this.props.content,u=i()("popper",this.props.popperClassName);return a.a.createElement(f.Manager,null,a.a.createElement(f.Reference,null,function(e){var n=e.ref;return a.a.createElement("div",{className:"popper_ref "+(l||""),ref:n},t)}),a.a.createElement(d.a,{in:r,timeout:100,mountOnEnter:!0,unmountOnExit:!0},function(e){return a.a.createElement(c,null,a.a.createElement(f.Popper,{placement:o},function(t){var r=t.ref,o=t.style,i=t.placement,l=t.arrowProps;return a.a.createElement("div",{ref:r,style:m({},o,g,v[e]),"data-placement":i,className:u},a.a.createElement("div",{className:"popper__background"},n(s),a.a.createElement("div",{ref:l.ref,"data-placement":i,className:"popper__arrow"})))}))}))},t}(r.PureComponent),b=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};var w=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.hidePopper,r=e.showPopper,o=e.className,i=x(e,["children","hidePopper","showPopper","className"]);return a.a.createElement("div",{className:"popper__manager "+o,onMouseEnter:r,onMouseLeave:n},a.a.createElement(y,P({},i),t))},t}(r.PureComponent);t.a=function(e){return function(t){function n(e){var n=t.call(this,e)||this;return n.showPopper=function(){n.setState(function(e){return E({},e,{show:!0})})},n.hidePopper=function(){n.setState(function(e){return E({},e,{show:!1})})},n.setState=n.setState.bind(n),n.state={placement:n.props.placement||"auto",show:!1},n}return b(n,t),n.prototype.componentWillReceiveProps=function(e){e.placement&&e.placement!==this.state.placement&&this.setState(function(t){return E({},t,{placement:e.placement})})},n.prototype.renderContent=function(e){if("function"==typeof e){var t=e;return a.a.createElement(t,null)}return e},n.prototype.render=function(){var t=this.state,n=t.show,r=t.placement,o=this.props.className||"";return a.a.createElement(e,E({},this.props,{showPopper:this.showPopper,hidePopper:this.hidePopper,renderContent:this.renderContent,show:n,placement:r,className:o}))},n}(a.a.Component)}(C)},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(5),i=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=["#E24D42","#1F78C1","#BA43A9","#705DA0","#466803","#508642","#447EBC","#C15C17","#890F02","#757575","#0A437C","#6D1F62","#584477","#629E51","#2F4F4F","#BF1B00","#806EB7","#8a2eb8","#699e00","#000000","#3F6833","#2F575E","#99440A","#E0752D","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],s=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick&&t.props.onClick(t.props.tag,e.ctrlKey,e.shiftKey)},t}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.tag,n=e.highlight,r=function(e){var t=function(e){for(var t=5381,n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}(e.toLowerCase());return{color:l[Math.abs(t%l.length)],borderColor:s[Math.abs(t%s.length)]}}(t.tag),i={background:r.color,borderColor:r.borderColor};return a.a.createElement(o.a,{placement:"bottom",content:"Click to add tag filter or Ctrl/Shift+click to remove"},a.a.createElement("span",{className:"label label-tag zbx-tag "+(n?"highlighted":""),style:i,onClick:this.handleClick},t.value?t.tag+": "+t.value:""+t.tag))},t}(r.PureComponent);t.a=u},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return s});var r=n(3),a=n.n(r),o=n(4);function i(e,t){try{var n=o.parseInterval(t);return Date.now()-1e3*e.lastchangeUnix<n}catch(e){return!1}}var l="DD MMM YYYY HH:mm:ss";function s(e,t){var n=a.a.unix(e),r=t||l;return n.format(r)}},function(e,t){e.exports=o},,,function(e,t,n){"use strict";"function"==typeof Symbol&&Symbol.iterator;e.exports=n(62)()},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n(0),a=n.n(r),o=n(7),i=n.n(o),l=n(2),s=n.n(l),u=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=13,f=27,p=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({value:e.target.value,error:!1})},n.handleKeyUp=function(e){e.which===c||"Enter"===e.key?n.submit():e.which!==f&&"Escape"!==e.key||n.dismiss()},n.handleBackdropClick=function(){n.dismiss()},n.dismiss=function(){n.setState({value:"",error:!1,message:""}),n.props.onClose()},n.submit=function(){if(!n.state.value)return n.setState({error:!0,message:"Enter message text"});n.props.onSubmit({message:n.state.value}).then(function(){n.dismiss()})},n.state={value:"",error:!1,message:""},n.modalContainer=document.body,n}return u(t,e),t.prototype.render=function(){if(!this.props.isOpen||!this.modalContainer)return null;var e=s()("gf-form-input",{"zbx-ack-error":this.state.error}),t=a.a.createElement("div",{className:"modal modal--narrow zbx-ack-modal",key:"modal"},a.a.createElement("div",{className:"modal-body"},a.a.createElement("div",{className:"modal-header"},a.a.createElement("h2",{className:"modal-header-title"},a.a.createElement("i",{className:"fa fa-reply-all"}),a.a.createElement("span",{className:"p-l-1"},"Acknowledge Problem")),a.a.createElement("a",{className:"modal-header-close",onClick:this.dismiss},a.a.createElement("i",{className:"fa fa-remove"}))),a.a.createElement("div",{className:"modal-content"},a.a.createElement("div",{className:"gf-form"},a.a.createElement("label",{className:"gf-form-hint"},a.a.createElement("input",{className:e,type:"text",name:"message",placeholder:"Message",maxLength:64,autoComplete:"off",autoFocus:!0,value:this.state.value,onChange:this.handleChange,onKeyUp:this.handleKeyUp}),a.a.createElement("small",{className:"gf-form-hint-text muted"},"Press Enter to submit"),this.state.error&&a.a.createElement("small",{className:"gf-form-hint-text muted ack-error-message"},this.state.message))),a.a.createElement("div",{className:"gf-form-button-row text-center"},a.a.createElement("button",{className:"btn btn-success",onClick:this.submit},"Acknowledge"),a.a.createElement("button",{className:"btn btn-inverse",onClick:this.dismiss},"Cancel"))))),n=[t,a.a.createElement("div",{className:"modal-backdrop in",key:"modal-backdrop",onClick:this.handleBackdropClick})],r=this.props.withBackdrop?n:t;return i.a.createPortal(r,this.modalContainer)},t}(r.PureComponent)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Reference=t.Manager=t.placements=t.Popper=void 0;var r=n(64),a=l(r),o=l(n(27)),i=l(n(72));function l(e){return e&&e.__esModule?e:{default:e}}t.Popper=a.default,t.placements=r.placements,t.Manager=o.default,t.Reference=i.default},,function(e,t){e.exports=i},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TriggerPanelCtrl=t.PANEL_DEFAULTS=t.getDefaultSeverity=t.DEFAULT_SEVERITY=t.getDefaultTarget=t.DEFAULT_TARGET=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=y(n(0)),i=y(n(7)),l=y(n(1)),s=y(n(3)),u=v(n(17)),c=v(n(4)),f=n(6),p=n(54),d=n(55),h=n(56),m=y(n(77)),g=y(n(78));function v(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}var b=t.DEFAULT_TARGET={group:{filter:""},host:{filter:""},application:{filter:""},trigger:{filter:""},tags:{filter:""},proxy:{filter:""}},E=t.getDefaultTarget=function(){return b},w=t.DEFAULT_SEVERITY=[{priority:0,severity:"Not classified",color:"rgb(108, 108, 108)",show:!0},{priority:1,severity:"Information",color:"rgb(120, 158, 183)",show:!0},{priority:2,severity:"Warning",color:"rgb(175, 180, 36)",show:!0},{priority:3,severity:"Average",color:"rgb(255, 137, 30)",show:!0},{priority:4,severity:"High",color:"rgb(255, 101, 72)",show:!0},{priority:5,severity:"Disaster",color:"rgb(215, 0, 0)",show:!0}],P=t.getDefaultSeverity=function(){return w},x="DD MMM YYYY HH:mm:ss",C=t.PANEL_DEFAULTS={schemaVersion:h.CURRENT_SCHEMA_VERSION,datasources:[],targets:{},hostField:!0,hostTechNameField:!1,hostGroups:!1,hostProxy:!1,showTags:!0,statusField:!0,statusIcon:!1,severityField:!0,ageField:!1,descriptionField:!0,descriptionAtNewLine:!1,hostsInMaintenance:!0,showTriggers:"all triggers",sortTriggersBy:{text:"last change",value:"lastchange"},showEvents:{text:"Problems",value:1},limit:100,layout:"table",fontSize:"100%",pageSize:10,problemTimeline:!0,highlightBackground:!1,highlightNewEvents:!1,highlightNewerThan:"1h",customLastChangeFormat:!1,lastChangeFormat:"",resizedColumns:[],triggerSeverity:P(),okEventColor:"rgb(56, 189, 113)",ackEventColor:"rgb(56, 219, 156)",markAckEvents:!1},N={0:"OK",1:"PROBLEM"};(t.TriggerPanelCtrl=function(e){function t(e,n,r,a,o,i,s,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return c.datasourceSrv=a,c.templateSrv=o,c.contextSrv=i,c.dashboardSrv=s,c.timeSrv=u,c.scope=e,c.$timeout=r,c.editorTabIndex=1,c.triggerStatusMap=N,c.defaultTimeFormat=x,c.pageIndex=0,c.triggerList=[],c.datasources={},c.range={},c.panel=(0,h.migratePanelSchema)(c.panel),l.default.defaultsDeep(c.panel,l.default.cloneDeep(C)),c.available_datasources=l.default.map(c.getZabbixDataSources(),"name"),0===c.panel.datasources.length&&c.panel.datasources.push(c.available_datasources[0]),c.isEmptyTargets()&&(c.panel.targets[c.panel.datasources[0]]=E()),c.initDatasources(),c.events.on("init-edit-mode",c.onInitEditMode.bind(c)),c.events.on("refresh",c.onRefresh.bind(c)),c}return t.$inject=["$scope","$injector","$timeout","datasourceSrv","templateSrv","contextSrv","dashboardSrv","timeSrv"],function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"setPanelError",value:function(e,t){var n=t||"Request Error";this.inspector={error:e},this.error=e.message||n,e.data&&(e.data.message&&(this.error=e.data.message),e.data.error&&(this.error=e.data.error)),this.events.emit("data-error",e),console.log("Panel data error:",e)}},{key:"initDatasources",value:function(){var e=this,t=l.default.map(this.panel.datasources,function(t){return e.datasourceSrv.get(t).then(function(n){return e.datasources[t]=n,n})});return Promise.all(t)}},{key:"getZabbixDataSources",value:function(){return l.default.filter(this.datasourceSrv.getMetricSources(),function(e){return"alexanderzobnin-zabbix-datasource"===e.meta.id&&e.value})}},{key:"isEmptyTargets",value:function(){var e=l.default.isEmpty(this.panel.targets),t=1===this.panel.targets.length&&(l.default.isEmpty(this.panel.targets[0])||""===this.panel.targets[0].target);return e||t}},{key:"onInitEditMode",value:function(){this.addEditorTab("Triggers",d.triggerPanelTriggersTab,1),this.addEditorTab("Options",p.triggerPanelOptionsTab,2)}},{key:"setTimeQueryStart",value:function(){this.timing.queryStart=(new Date).getTime()}},{key:"setTimeQueryEnd",value:function(){this.timing.queryEnd=(new Date).getTime()}},{key:"onRefresh",value:function(){var e=this;if(!this.otherPanelInFullscreenMode())return this.range=this.timeSrv.timeRange(),delete this.error,this.loading=!0,this.setTimeQueryStart(),this.pageIndex=0,this.getTriggers().then(function(t){return e.loading=!1,e.setTimeQueryEnd(),e.renderTriggers(t)}).then(function(){e.$timeout(function(){e.renderingCompleted()})}).catch(function(t){e.loading=!1,t.cancelled?console.log("Panel request cancelled",t):e.setPanelError(t)})}},{key:"renderTriggers",value:function(e){var n=this,r=l.default.cloneDeep(e||this.triggerListUnfiltered);return this.triggerListUnfiltered=l.default.cloneDeep(r),r=l.default.map(r,this.formatTrigger.bind(this)),r=this.filterTriggersPost(r),r=(r=this.sortTriggers(r)).slice(0,this.panel.limit||C.limit),this.triggerList=r,this.$timeout(function(){return function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var i=a.get;return void 0!==i?i.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",n).call(n,n.triggerList)})}},{key:"getTriggers",value:function(){var e=this,t=Math.ceil(u.parse(this.range.from)/1e3),n=Math.ceil(u.parse(this.range.to)/1e3),a=l.default.map(this.panel.datasources,function(a){var o=void 0;return e.datasourceSrv.get(a).then(function(r){var o=r.zabbix,i=e.panel.showEvents.value,l=e.panel.targets[a],s=e.panel.hostProxy?o.getProxies():function(){return[]},u=r.replaceTemplateVars(l.group.filter),c=r.replaceTemplateVars(l.host.filter),f=r.replaceTemplateVars(l.application.filter),p=r.replaceTemplateVars(l.proxy.filter),d={showTriggers:i};return 1!==i&&(d.timeFrom=t,d.timeTo=n),Promise.all([o.getTriggers(u,c,f,d,p),s])}).then(function(t){var n=r(t,2),i=n[0],s=n[1];o=l.default.keyBy(s,"proxyid");var u=l.default.compact(i.map(function(e){return e.lastEvent.eventid}));return Promise.all([e.datasources[a].zabbix.getExtendedEventData(u),e.datasources[a].zabbix.getEventAlerts(u),Promise.resolve(i)])}).then(function(t){var n=r(t,3),a=n[0],o=n[1],i=n[2];return e.addEventTags(a,i),e.addAcknowledges(a,i),e.addEventAlerts(o,i),i}).then(function(t){return e.setMaintenanceStatus(t)}).then(function(t){return e.filterTriggersPre(t,a)}).then(function(t){return e.addTriggerDataSource(t,a)}).then(function(t){return e.addTriggerHostProxy(t,o)})});return Promise.all(a).then(function(e){return l.default.flatten(e)})}},{key:"addAcknowledges",value:function(e,t){var n=this;return l.default.each(t,function(t){var r=l.default.find(e,function(e){return e.eventid===t.lastEvent.eventid});r&&(t.acknowledges=l.default.map(r.acknowledges,n.formatAcknowledge.bind(n))),t.lastEvent.eventid||(t.lastEvent=null)}),t}},{key:"formatAcknowledge",value:function(e){var t=s.default.unix(e.clock);if(this.panel.customLastChangeFormat?e.time=t.format(this.panel.lastChangeFormat):e.time=t.format(this.defaultTimeFormat),e.user=e.alias||"",e.name||e.surname){var n=(e.name||"")+" "+(e.surname||"");e.user+=" ("+n+")"}return e}},{key:"addEventTags",value:function(e,t){return l.default.each(t,function(t){var n=l.default.find(e,function(e){return e.eventid===t.lastEvent.eventid});n&&n.tags&&n.tags.length&&(t.tags=n.tags)}),t}},{key:"addEventAlerts",value:function(e,t){return e.forEach(function(e){var n=l.default.find(t,function(t){return t.lastEvent&&e.eventid===t.lastEvent.eventid});n&&(n.alerts=n.alerts?n.alerts.concat(e):[e])}),t}},{key:"filterTriggersPre",value:function(e,t){var n=this.panel.targets[t].trigger.filter;(n=this.datasources[t].replaceTemplateVars(n))&&(e=function(e,t){return c.isRegex(t)?l.default.filter(e,function(e){return c.buildRegex(t).test(e.description)}):l.default.filter(e,function(e){return e.description===t})}(e,n));var r=this.panel.targets[t];if(r.tags.filter){var a=this.datasources[t].replaceTemplateVars(r.tags.filter);a=a.replace("/^","").replace("$/","");var o=this.parseTags(a);e=l.default.filter(e,function(e){return l.default.every(o,function(t){return l.default.find(e.tags,{tag:t.tag,value:t.value})})})}return e}},{key:"filterTriggersPost",value:function(e){var t=this,n=l.default.cloneDeep(e);return"unacknowledged"===this.panel.showTriggers?n=l.default.filter(n,function(e){return!(e.acknowledges&&e.acknowledges.length)}):"acknowledged"===this.panel.showTriggers&&(n=l.default.filter(n,function(e){return e.acknowledges&&e.acknowledges.length})),this.panel.hostsInMaintenance||(n=l.default.filter(n,function(e){return!1===e.maintenance})),n=l.default.filter(n,function(e){return t.panel.triggerSeverity[e.priority].show})}},{key:"setMaintenanceStatus",value:function(e){return l.default.each(e,function(e){var t=l.default.some(e.hosts,function(e){return"1"===e.maintenance_status});e.maintenance=t}),e}},{key:"addTriggerDataSource",value:function(e,t){return l.default.each(e,function(e){e.datasource=t}),e}},{key:"addTriggerHostProxy",value:function(e,t){return e.forEach(function(e){if(e.hosts&&e.hosts.length){var n=e.hosts[0];if("0"!==n.proxy_hostid){var r=t[n.proxy_hostid];n.proxy=r?r.host:""}}}),e}},{key:"sortTriggers",value:function(e){return e="priority"===this.panel.sortTriggersBy.value?l.default.orderBy(e,["priority","lastchangeUnix","triggerid"],["desc","desc","desc"]):l.default.orderBy(e,["lastchangeUnix","priority","triggerid"],["desc","desc","desc"])}},{key:"formatTrigger",value:function(e){var t=l.default.cloneDeep(e);if(t.hosts&&t.hosts.length){var n=t.hosts[0];t.host=n.name,t.hostTechName=n.host,n.proxy&&(t.proxy=n.proxy)}return t.tags&&0===t.tags.length&&(t.tags=null),t.comments&&(t.comments=t.comments.replace("\n","<br>")),t.lastchangeUnix=Number(t.lastchange),t}},{key:"parseTags",value:function(e){if(!e)return[];var t=l.default.map(e.split(","),function(e){return e.trim()});return t=l.default.map(t,function(e){var t=e.split(":");return{tag:t[0].trim(),value:t[1].trim()}})}},{key:"tagsToString",value:function(e){return l.default.map(e,function(e){return e.tag+":"+e.value}).join(", ")}},{key:"addTagFilter",value:function(e,t){var n=this.panel.targets[t].tags.filter,r=this.parseTags(n),a={tag:e.tag,value:e.value};r.push(a),r=l.default.uniqWith(r,l.default.isEqual);var o=this.tagsToString(r);this.panel.targets[t].tags.filter=o,this.refresh()}},{key:"removeTagFilter",value:function(e,t){var n=this.panel.targets[t].tags.filter,r=this.parseTags(n);l.default.remove(r,function(t){return t.tag===e.tag&&t.value===e.value}),r=l.default.uniqWith(r,l.default.isEqual);var a=this.tagsToString(r);this.panel.targets[t].tags.filter=a,this.refresh()}},{key:"getProblemEvents",value:function(e){var t=[e.triggerid],n=Math.ceil(u.parse(this.range.from)/1e3),r=Math.ceil(u.parse(this.range.to)/1e3);return this.datasourceSrv.get(e.datasource).then(function(e){return e.zabbix.getEvents(t,n,r,[0,1],100)})}},{key:"formatHostName",value:function(e){var t="";return this.panel.hostField&&this.panel.hostTechNameField?t=e.host+" ("+e.hostTechName+")":(this.panel.hostField||this.panel.hostTechNameField)&&(t=this.panel.hostField?e.host:e.hostTechName),this.panel.hostProxy&&e.proxy&&(t=e.proxy+": "+t),t}},{key:"formatHostGroups",value:function(e){var t="";this.panel.hostGroups&&(t+="[ "+l.default.map(e.groups,"name").join(", ")+" ]");return t}},{key:"isNewTrigger",value:function(e){try{var t=c.parseInterval(this.panel.highlightNewerThan||C.highlightNewerThan);return Date.now()-1e3*e.lastchangeUnix<t}catch(e){return!1}}},{key:"getAlertIconClass",value:function(e){var t="";return t="1"===e.value?e.priority>=3?"icon-gf-critical":"icon-gf-warning":"icon-gf-online",this.panel.highlightNewEvents&&this.isNewTrigger(e)&&(t+=" zabbix-trigger--blinked"),t}},{key:"getAlertIconClassBySeverity",value:function(e){var t="icon-gf-warning";return e.priority>=3&&(t="icon-gf-critical"),t}},{key:"getAlertStateClass",value:function(e){var t="";return t="1"===e.value?"alert-state-critical":"alert-state-ok",this.panel.highlightNewEvents&&this.isNewTrigger(e)&&(t+=" zabbix-trigger--blinked"),t}},{key:"resetResizedColumns",value:function(){this.panel.resizedColumns=[],this.render()}},{key:"acknowledgeTrigger",value:function(e,t){var n=this,r=e.lastEvent?e.lastEvent.eventid:null,a=this.contextSrv.user.name+" (Grafana): "+t;return this.datasourceSrv.get(e.datasource).then(function(e){var t=n.contextSrv.isEditor||n.contextSrv.isGrafanaAdmin;return e.disableReadOnlyUsersAck&&!t?Promise.reject({message:"You have no permissions to acknowledge events."}):r?e.zabbix.acknowledgeEvent(r,a):Promise.reject({message:"Trigger has no events. Nothing to acknowledge."})}).then(this.onRefresh.bind(this)).catch(function(e){n.setPanelError(e)})}},{key:"handlePageSizeChange",value:function(e,t){var n=this;this.panel.pageSize=e,this.pageIndex=t,this.scope.$apply(function(){n.render()})}},{key:"handleColumnResize",value:function(e){var t=this;this.panel.resizedColumns=e,this.scope.$apply(function(){t.render()})}},{key:"link",value:function(e,t,n,r){var a=r.panel,l=r.triggerList;function s(){var e=Math.ceil(u.parse(r.range.from)/1e3),n=Math.ceil(u.parse(r.range.to)/1e3),l=parseInt(a.fontSize.slice(0,a.fontSize.length-1)),s=l&&100!==l?l:null,c=a.pageSize||10,f=r.loading&&(!r.triggerList||!r.triggerList.length),p={};for(var d in C)p[d]=r.panel[d];var h={problems:r.triggerList,panelOptions:p,timeRange:{timeFrom:e,timeTo:n},loading:f,pageSize:c,fontSize:s,getProblemEvents:r.getProblemEvents.bind(r),onPageSizeChange:r.handlePageSizeChange.bind(r),onColumnResize:r.handleColumnResize.bind(r),onProblemAck:function(e,t){var n=t.message;return r.acknowledgeTrigger(e,n)},onTagClick:function(e,t,n,a){n||a?r.removeTagFilter(e,t):r.addTagFilter(e,t)}},v=void 0;v="list"===a.layout?o.default.createElement(g.default,h):o.default.createElement(m.default,h),i.default.render(v,t.find(".panel-content")[0])}e.$watchGroup(["ctrl.triggerList"],s),r.events.on("render",function(e){l=e||l,s()})}}]),t}(f.PanelCtrl)).templateUrl="public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/module.html"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e){return Array.isArray(e)}function u(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(s(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}t.default={get:function(e,t,n){if(!t)return e;var r=u(t),a=void 0;try{a=r.reduce(function(e,t){return e[t]},e)}catch(e){}return void 0!==a?a:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=u(t),a=void 0,o=e;for(;(a=r.shift())&&r.length;)o[a]||(o[a]={}),o=o[a];return o[a]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort(function(e,a){for(var o=0;o<t.length;o+=1){var i=t[o],l=!1===n[o]||"desc"===n[o],s=i(e,a);if(s)return l?-s:s}return n[0]?e[r]-a[r]:a[r]-e[r]})},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter(function(n,r){var a=t(n);return!!a&&(e.splice(r,1),!0)})},clone:function(e){try{return JSON.parse(JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t}))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if(void 0!==(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce(function(e,t){return e+t},0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,o=t.className,s=l(t,["children","className"]);return r.default.createElement("div",i({className:(0,a.default)(e,o)},s),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce(function(e,n,r){var a="function"==typeof t?t(n,r):n[t];return e[a]=s(e[a])?e[a]:[],e[a].push(n),e},{})},isArray:s,splitProps:function(e){var t=e.className,n=e.style,r=l(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};e&&Object.keys(e).map(function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),!0});return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?Object.getPrototypeOf(e).isReactComponent?r.default.createElement(e,t):e(t):n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}}},function(e,t,n){"use strict";function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}e.exports=r},function(e,t,n){"use strict";e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){"use strict";e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ManagerContext=void 0;var r=u(n(23)),a=u(n(24)),o=u(n(25)),i=u(n(26)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),s=u(n(67));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.ManagerContext=(0,s.default)({getReferenceRef:void 0,referenceNode:void 0}),f=function(e){function t(){var t;return t=e.call(this)||this,(0,i.default)((0,o.default)((0,o.default)(t)),"getReferenceRef",function(e){return t.setState(function(t){var n=t.context;return{context:(0,r.default)({},n,{referenceNode:e})}})}),t.state={context:{getReferenceRef:t.getReferenceRef,referenceNode:void 0}},t}return(0,a.default)(t,e),t.prototype.render=function(){return l.createElement(c.Provider,{value:this.state.context},this.props.children)},t}(l.Component);t.default=f},,,function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.unwrapArray=function(e){return Array.isArray(e)?e[0]:e},t.safeInvoke=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactTableDefaults=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(0),o=p(a),i=p(n(2)),l=p(n(22)),s=p(n(57)),u=p(n(58)),c=p(n(59)),f=p(n(61));function p(e){return e&&e.__esModule?e:{default:e}}var d=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ReactTableDefaults=c.default;var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:0,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,(0,u.default)((0,s.default)(a.Component))),m(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,a=t.style,s=t.getProps,u=t.getTableProps,f=t.getTheadGroupProps,p=t.getTheadGroupTrProps,m=t.getTheadGroupThProps,g=t.getTheadProps,v=t.getTheadTrProps,y=t.getTheadThProps,b=t.getTheadFilterProps,E=t.getTheadFilterTrProps,w=t.getTheadFilterThProps,P=t.getTbodyProps,x=t.getTrGroupProps,C=t.getTrProps,N=t.getTdProps,k=t.getTfootProps,T=t.getTfootTrProps,S=t.getTfootTdProps,O=t.getPaginationProps,_=t.getLoadingProps,D=t.getNoDataProps,R=t.getResizerProps,M=t.showPagination,z=t.showPaginationTop,F=t.showPaginationBottom,A=t.manual,j=t.loadingText,H=t.noDataText,I=t.sortable,L=t.multiSort,W=t.resizable,U=t.filterable,B=t.pivotIDKey,G=t.pivotValKey,K=t.pivotBy,V=t.subRowsKey,$=t.aggregatedKey,Y=t.originalKey,q=t.indexKey,X=t.groupedByPivotKey,J=t.loading,Q=t.pageSize,Z=t.page,ee=t.sorted,te=t.filtered,ne=t.resized,re=t.expanded,ae=t.pages,oe=t.onExpandedChange,ie=t.TableComponent,le=t.TheadComponent,se=t.TbodyComponent,ue=t.TrGroupComponent,ce=t.TrComponent,fe=t.ThComponent,pe=t.TdComponent,de=t.TfootComponent,he=t.PaginationComponent,me=t.LoadingComponent,ge=t.SubComponent,ve=t.NoDataComponent,ye=t.ResizerComponent,be=t.ExpanderComponent,Ee=t.PivotValueComponent,we=t.PivotComponent,Pe=t.AggregatedComponent,xe=t.FilterComponent,Ce=t.PadRowComponent,Ne=t.resolvedData,ke=t.allVisibleColumns,Te=t.headerGroups,Se=t.hasHeaderGroups,Oe=t.sortedData,_e=t.currentlyResizing,De=Q*Z,Re=De+Q,Me=A?Ne:Oe.slice(De,Re),ze=this.getMinRows(),Fe=l.default.range(Math.max(ze-Me.length,0)),Ae=ke.some(function(e){return e.Footer}),je=U||ke.some(function(e){return e.filterable}),He=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map(function(t,a){var o=h({},t,{_viewIndex:r+=1}),i=n.concat([a]);if(o[V]&&l.default.get(re,i)){var s=e(o[V],i,r),u=d(s,2);o[V]=u[0],r=u[1]}return o}),r]}(Me),Ie=d(He,1);Me=Ie[0];var Le=Z>0,We=Z+1<ae,Ue=l.default.sum(ke.map(function(e){var t=ne.find(function(t){return t.id===e.id})||{};return l.default.getFirstDefined(t.value,e.width,e.minWidth)})),Be=-1,Ge=h({},t,{startRow:De,endRow:Re,pageRows:Me,minRows:ze,padRows:Fe,hasColumnFooter:Ae,canPrevious:Le,canNext:We,rowMinWidth:Ue}),Ke=l.default.splitProps(s(Ge,void 0,void 0,this)),Ve=l.default.splitProps(u(Ge,void 0,void 0,this)),$e=l.default.splitProps(P(Ge,void 0,void 0,this)),Ye=_(Ge,void 0,void 0,this),qe=D(Ge,void 0,void 0,this),Xe=function(t,n){var r=function(e){return(ne.find(function(t){return t.id===e.id})||{}).value},a=l.default.sum(t.columns.map(function(e){return e.width||r(e)?0:e.minWidth})),s=l.default.sum(t.columns.map(function(e){return l.default.getFirstDefined(r(e),e.width,e.minWidth)})),u=l.default.sum(t.columns.map(function(e){return l.default.getFirstDefined(r(e),e.width,e.maxWidth)})),c=l.default.splitProps(m(Ge,void 0,t,e)),f=l.default.splitProps(t.getHeaderProps(Ge,void 0,t,e)),p=[t.headerClassName,c.className,f.className],d=h({},t.headerStyle,c.style,f.style),g=h({},c.rest,f.rest),v={flex:a+" 0 auto",width:l.default.asPx(s),maxWidth:l.default.asPx(u)};return o.default.createElement(fe,h({key:n+"-"+t.id,className:(0,i.default)(p),style:h({},d,v)},g),l.default.normalizeComponent(t.Header,{data:Oe,column:t}))},Je=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},a=ee.find(function(e){return e.id===t.id}),s="function"==typeof t.show?t.show():t.show,u=l.default.getFirstDefined(r.value,t.width,t.minWidth),c=l.default.getFirstDefined(r.value,t.width,t.maxWidth),f=l.default.splitProps(y(Ge,void 0,t,e)),p=l.default.splitProps(t.getHeaderProps(Ge,void 0,t,e)),d=[t.headerClassName,f.className,p.className],m=h({},t.headerStyle,f.style,p.style),g=h({},f.rest,p.rest),v=l.default.getFirstDefined(t.resizable,W,!1),b=v?o.default.createElement(ye,h({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},R("finalState",void 0,t,e))):null,E=l.default.getFirstDefined(t.sortable,I,!1);return o.default.createElement(fe,h({key:n+"-"+t.id,className:(0,i.default)(d,v&&"rt-resizable-header",a?a.desc?"-sort-desc":"-sort-asc":"",E&&"-cursor-pointer",!s&&"-hidden",K&&K.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:h({},m,{flex:u+" 0 auto",width:l.default.asPx(u),maxWidth:l.default.asPx(c)}),toggleSort:function(n){E&&e.sortColumn(t,!!L&&n.shiftKey)}},g),o.default.createElement("div",{className:(0,i.default)(v&&"rt-resizable-header-content")},l.default.normalizeComponent(t.Header,{data:Oe,column:t})),b)},Qe=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},a=l.default.getFirstDefined(r.value,t.width,t.minWidth),s=l.default.getFirstDefined(r.value,t.width,t.maxWidth),u=l.default.splitProps(w(Ge,void 0,t,e)),f=l.default.splitProps(t.getHeaderProps(Ge,void 0,t,e)),p=[t.headerClassName,u.className,f.className],d=h({},t.headerStyle,u.style,f.style),m=h({},u.rest,f.rest),g=te.find(function(e){return e.id===t.id}),v=t.Filter||xe,y=l.default.getFirstDefined(t.filterable,U,!1);return o.default.createElement(fe,h({key:n+"-"+t.id,className:(0,i.default)(p),style:h({},d,{flex:a+" 0 auto",width:l.default.asPx(a),maxWidth:l.default.asPx(s)})},m),y?l.default.normalizeComponent(v,{column:t,filter:g,onChange:function(n){return e.filterColumn(t,n)}},c.default.column.Filter):null)},Ze=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},a="function"==typeof t.show?t.show():t.show,s=l.default.getFirstDefined(r.value,t.width,t.minWidth),u=s,c=l.default.getFirstDefined(r.value,t.width,t.maxWidth),f=l.default.splitProps(N(Ge,void 0,t,e)),p=l.default.splitProps(t.getProps(Ge,void 0,t,e)),d=[f.className,t.className,p.className],m=h({},f.style,t.style,p.style);return o.default.createElement(pe,h({key:n+"-"+t.id,className:(0,i.default)(d,!a&&"hidden"),style:h({},m,{flex:u+" 0 auto",width:l.default.asPx(s),maxWidth:l.default.asPx(c)})},f.rest),l.default.normalizeComponent(Ce))},et=function(t,n){var r=x(Ge,void 0,void 0,e),a=l.default.splitProps(C(Ge,void 0,void 0,e));return o.default.createElement(ue,h({key:n},r),o.default.createElement(ce,{className:(0,i.default)("-padRow",(Me.length+n)%2?"-even":"-odd",a.className),style:a.style||{}},ke.map(Ze)))},tt=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},a="function"==typeof t.show?t.show():t.show,s=l.default.getFirstDefined(r.value,t.width,t.minWidth),u=l.default.getFirstDefined(r.value,t.width,t.maxWidth),c=l.default.splitProps(S(Ge,void 0,void 0,e)),f=l.default.splitProps(t.getProps(Ge,void 0,t,e)),p=l.default.splitProps(t.getFooterProps(Ge,void 0,t,e)),d=[c.className,t.className,f.className,p.className],m=h({},c.style,t.style,f.style,p.style);return o.default.createElement(pe,h({key:n+"-"+t.id,className:(0,i.default)(d,!a&&"hidden"),style:h({},m,{flex:s+" 0 auto",width:l.default.asPx(s),maxWidth:l.default.asPx(u)})},f.rest,c.rest,p.rest),l.default.normalizeComponent(t.Footer,{data:Oe,column:t}))},nt=function(){var n=function(){var n=l.default.splitProps(O(Ge,void 0,void 0,e));return o.default.createElement(he,h({},t,{pages:ae,canPrevious:Le,canNext:We,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:n.className,style:n.style},n.rest))}();return o.default.createElement("div",h({className:(0,i.default)("ReactTable",r,Ke.className),style:h({},a,Ke.style)},Ke.rest),M&&z?o.default.createElement("div",{className:"pagination-top"},n):null,o.default.createElement(ie,h({className:(0,i.default)(Ve.className,_e?"rt-resizing":""),style:Ve.style},Ve.rest),Se?function(){var t=l.default.splitProps(f(Ge,void 0,void 0,e)),n=l.default.splitProps(p(Ge,void 0,void 0,e));return o.default.createElement(le,h({className:(0,i.default)("-headerGroups",t.className),style:h({},t.style,{minWidth:Ue+"px"})},t.rest),o.default.createElement(ce,h({className:n.className,style:n.style},n.rest),Te.map(Xe)))}():null,function(){var t=l.default.splitProps(g(Ge,void 0,void 0,e)),n=l.default.splitProps(v(Ge,void 0,void 0,e));return o.default.createElement(le,h({className:(0,i.default)("-header",t.className),style:h({},t.style,{minWidth:Ue+"px"})},t.rest),o.default.createElement(ce,h({className:n.className,style:n.style},n.rest),ke.map(Je)))}(),je?function(){var t=l.default.splitProps(b(Ge,void 0,void 0,e)),n=l.default.splitProps(E(Ge,void 0,void 0,e));return o.default.createElement(le,h({className:(0,i.default)("-filters",t.className),style:h({},t.style,{minWidth:Ue+"px"})},t.rest),o.default.createElement(ce,h({className:n.className,style:n.style},n.rest),ke.map(Qe)))}():null,o.default.createElement(se,h({className:(0,i.default)($e.className),style:h({},$e.style,{minWidth:Ue+"px"})},$e.rest),Me.map(function(t,n){return function t(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s={original:n[Y],row:n,index:n[q],viewIndex:Be+=1,pageSize:Q,page:Z,level:a.length,nestingPath:a.concat([r]),aggregated:n[$],groupedByPivot:n[X],subRows:n[V]},u=l.default.get(re,s.nestingPath),c=x(Ge,s,void 0,e),f=l.default.splitProps(C(Ge,s,void 0,e));return o.default.createElement(ue,h({key:s.nestingPath.join("_")},c),o.default.createElement(ce,h({className:(0,i.default)(f.className,n._viewIndex%2?"-even":"-odd"),style:f.style},f.rest),ke.map(function(t,r){var a=ne.find(function(e){return e.id===t.id})||{},c="function"==typeof t.show?t.show():t.show,f=l.default.getFirstDefined(a.value,t.width,t.minWidth),p=l.default.getFirstDefined(a.value,t.width,t.maxWidth),d=l.default.splitProps(N(Ge,s,t,e)),m=l.default.splitProps(t.getProps(Ge,s,t,e)),g=[d.className,t.className,m.className],v=h({},d.style,t.style,m.style),y=h({},s,{isExpanded:u,column:h({},t),value:s.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:ne,show:c,width:f,maxWidth:p,tdProps:d,columnProps:m,classes:g,styles:v}),b=y.value,E=void 0,w=void 0,P=void 0,x=l.default.normalizeComponent(t.Cell,y,b),C=t.Aggregated||(t.aggregate?t.Cell:Pe),k=t.Expander||be,T=t.PivotValue||Ee,S=we||function(e){return o.default.createElement("div",null,o.default.createElement(k,e),o.default.createElement(T,e))},O=t.Pivot||S;(y.pivoted||y.expander)&&(y.expandable=!0,E=!0,!y.pivoted||y.subRows||ge||(y.expandable=!1)),y.pivoted?(w=s.row[B]===t.id&&y.subRows,P=K.indexOf(t.id)>K.indexOf(s.row[B])&&y.subRows,x=w?l.default.normalizeComponent(O,h({},y,{value:n[G]}),n[G]):P?l.default.normalizeComponent(C,y,b):null):y.aggregated&&(x=l.default.normalizeComponent(C,y,b)),y.expander&&(x=l.default.normalizeComponent(k,y,n[G]),K&&(y.groupedByPivot&&(x=null),y.subRows||ge||(x=null)));var _=E?function(t){var n=l.default.clone(re);return n=u?l.default.set(n,y.nestingPath,!1):l.default.set(n,y.nestingPath,{}),e.setStateWithData({expanded:n},function(){return oe&&oe(n,y.nestingPath,t)})}:function(){},D={onClick:_};return d.rest.onClick&&(D.onClick=function(e){d.rest.onClick(e,function(){return _(e)})}),m.rest.onClick&&(D.onClick=function(e){m.rest.onClick(e,function(){return _(e)})}),o.default.createElement(pe,h({key:r+"-"+t.id,className:(0,i.default)(g,!c&&"hidden",y.expandable&&"rt-expandable",(w||P)&&"rt-pivot"),style:h({},v,{flex:f+" 0 auto",width:l.default.asPx(f),maxWidth:l.default.asPx(p)})},d.rest,m.rest,D),x)})),s.subRows&&u&&s.subRows.map(function(e,n){return t(e,n,s.nestingPath)}),ge&&!s.subRows&&u&&ge(s))}(t,n)}),Fe.map(et)),Ae?function(){var t=k(Ge,void 0,void 0,e),n=l.default.splitProps(T(Ge,void 0,void 0,e));return o.default.createElement(de,h({className:t.className,style:h({},t.style,{minWidth:Ue+"px"})},t.rest),o.default.createElement(ce,h({className:(0,i.default)(n.className),style:n.style},n.rest),ke.map(tt)))}():null),M&&F?o.default.createElement("div",{className:"pagination-bottom"},n):null,!Me.length&&o.default.createElement(ve,qe,l.default.normalizeComponent(H)),o.default.createElement(me,h({loading:J,loadingText:j},Ye)))};return n?n(Ge,nt,this):nt()}}]),t}();g.propTypes=f.default,g.defaultProps=c.default,t.default=g},function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(13)),a=l(n(0)),o=l(n(7)),i=n(74);n(75);function l(e){return e&&e.__esModule?e:{default:e}}var s="unmounted";t.UNMOUNTED=s;var u="exited";t.EXITED=u;var c="entering";t.ENTERING=c;var f="entered";t.ENTERED=f;t.EXITING="exiting";var p=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,o=n.transitionGroup,i=o&&!o.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a=u,r.appearStatus=c):a=f:a=t.unmountOnExit||t.mountOnEnter?s:u,r.state={status:a},r.nextCallback=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===s?{status:u}:null},n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==f&&(t=c):n!==c&&n!==f||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=r.appear),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=o.default.findDOMNode(this);t===c?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===u&&this.setState({status:s})},n.performEnter=function(e,t){var n=this,r=this.props.enter,a=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,o=this.getTimeouts();t||r?(this.props.onEnter(e,a),this.safeSetState({status:c},function(){n.props.onEntering(e,a),n.onTransitionEnd(e,o.enter,function(){n.safeSetState({status:f},function(){n.props.onEntered(e,a)})})})):this.safeSetState({status:f},function(){n.props.onEntered(e)})},n.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:u},function(){t.props.onExited(e)})})})):this.safeSetState({status:u},function(){t.props.onExited(e)})},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===s)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var o=a.default.Children.only(n);return a.default.cloneElement(o,r)},t}(a.default.Component);function d(){}p.contextTypes={transitionGroup:r.object},p.childContextTypes={transitionGroup:function(){}},p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:d,onEntering:d,onEntered:d,onExit:d,onExiting:d,onExited:d},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4;var h=(0,i.polyfill)(p);t.default=h},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PanelCtrl=void 0;var r=n(21),a=n(6);n(76),(0,a.loadPluginCss)({dark:"plugins/alexanderzobnin-zabbix-app/css/grafana-zabbix.dark.css",light:"plugins/alexanderzobnin-zabbix-app/css/grafana-zabbix.light.css"}),t.PanelCtrl=r.TriggerPanelCtrl},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerPanelOptionsTab=function(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/options_tab.html",controller:r}};var r=["$scope",function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.editor=this,this.panelCtrl=t.ctrl,this.panel=this.panelCtrl.panel,this.layouts=[{text:"Table",value:"table"},{text:"List",value:"list"}],this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.ackFilters=["all triggers","unacknowledged","acknowledged"],this.sortByFields=[{text:"last change",value:"lastchange"},{text:"severity",value:"priority"}],this.showEventsFields=[{text:"All",value:[0,1]},{text:"OK",value:[0]},{text:"Problems",value:1}]}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.triggerPanelTriggersTab=function(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/triggers_tab.html",controller:l}};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),i=n(21);var l=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.editor=this,this.panelCtrl=t.ctrl,this.panel=this.panelCtrl.panel,this.templateSrv=o,this.datasources=this.panelCtrl.datasources;var i={getGroupNames:{},getHostNames:{},getApplicationNames:{},getProxyNames:{},oldTarget:a.default.cloneDeep(this.panel.targets)};a.default.defaultsDeep(this,i),this.initDatasources(),this.panelCtrl.refresh()}return e.$inject=["$scope","$rootScope","uiSegmentSrv","templateSrv"],r(e,[{key:"initDatasources",value:function(){var e=this;return this.panelCtrl.initDatasources().then(function(t){a.default.each(t,function(t){e.bindSuggestionFunctions(t)})})}},{key:"bindSuggestionFunctions",value:function(e){var t=e.name;this.getGroupNames[t]=a.default.bind(this.suggestGroups,this,e),this.getHostNames[t]=a.default.bind(this.suggestHosts,this,e),this.getApplicationNames[t]=a.default.bind(this.suggestApps,this,e),this.getProxyNames[t]=a.default.bind(this.suggestProxies,this,e)}},{key:"suggestGroups",value:function(e,t,n){return e.zabbix.getAllGroups().then(function(e){return a.default.map(e,"name")}).then(n)}},{key:"suggestHosts",value:function(e,t,n){var r=e.replaceTemplateVars(this.panel.targets[e.name].group.filter);return e.zabbix.getAllHosts(r).then(function(e){return a.default.map(e,"name")}).then(n)}},{key:"suggestApps",value:function(e,t,n){var r=e.replaceTemplateVars(this.panel.targets[e.name].group.filter),o=e.replaceTemplateVars(this.panel.targets[e.name].host.filter);return e.zabbix.getAllApps(r,o).then(function(e){return a.default.map(e,"name")}).then(n)}},{key:"suggestProxies",value:function(e,t,n){return e.zabbix.getProxies().then(function(e){return a.default.map(e,"host")}).then(n)}},{key:"datasourcesChanged",value:function(){var e=this;a.default.each(this.panel.datasources,function(t){e.panel.targets[t]||(e.panel.targets[t]=(0,i.getDefaultTarget)())}),a.default.each(this.panel.targets,function(t,n){a.default.includes(e.panel.datasources,n)||delete e.panel.targets[n]}),this.parseTarget()}},{key:"parseTarget",value:function(){var e=this;this.initDatasources().then(function(){var t=a.default.cloneDeep(e.panel.targets);a.default.isEqual(e.oldTarget,t)||(e.oldTarget=t,e.panelCtrl.refresh())})}},{key:"isRegex",value:function(e){return o.isRegex(e)}},{key:"isVariable",value:function(e){return o.isTemplateVariable(e,this.templateSrv.variables)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_SCHEMA_VERSION=void 0,t.migratePanelSchema=function(e){if(function(e){return!e.datasource&&!e.datasources&&!e.triggers&&function(e){return!e||r.default.isArray(e)&&(0===e.length||1===e.length&&r.default.isEmpty(e[0]))}(e.targets)}(e))return delete e.targets,e;var t=function(e){return e.schemaVersion||1}(e);e.schemaVersion=o,t<2&&(e.datasources=[e.datasource],e.targets={},e.targets[e.datasources[0]]=e.triggers,delete e.triggers,delete e.datasource);t<3&&(delete e.lastChangeField,delete e.infoField,delete e.scroll,delete e.hideHostsInMaintenance);t<5&&e.targets&&!r.default.isEmpty(e.targets)&&r.default.each(e.targets,function(e){r.default.defaultsDeep(e,(0,a.getDefaultTarget)())});t<6&&e.showEvents&&"1"===e.showEvents.value&&(e.showEvents.value=1);return e};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),a=n(21);var o=t.CURRENT_SCHEMA_VERSION=6},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),a(n,[{key:"componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach(function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])});["sortable","filterable","resizable"].forEach(function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",a="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[a]}}),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),a=this.getResolvedState({},e),o=a.freezeWhenExpanded;if(a.frozen=!1,o)for(var i=Object.keys(a.expanded),l=0;l<i.length;l+=1)if(a.expanded[i[l]]){a.frozen=!0;break}return(r.frozen&&!a.frozen||r.sorted!==a.sorted||r.filtered!==a.filtered||r.showFilters!==a.showFilters||!a.frozen&&r.resolvedData!==a.resolvedData)&&((r.sorted!==a.sorted&&this.props.collapseOnSortingChange||r.filtered!==a.filtered||r.showFilters!==a.showFilters||r.sortedData&&!a.frozen&&r.resolvedData!==a.resolvedData&&this.props.collapseOnDataChange)&&(a.expanded={}),Object.assign(a,this.getSortedData(a))),r.filtered!==a.filtered&&(a.page=0),a.sortedData&&(a.pages=a.manual?a.pages:Math.ceil(a.sortedData.length/a.pageSize),a.page=Math.max(a.page>=a.pages?a.pages-1:a.page,0)),this.setState(a,function(){t&&t(),r.page===a.page&&r.pageSize===a.pageSize&&r.sorted===a.sorted&&r.filtered===a.filtered||n.fireFetchData()})}}]),n}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(n(0)),o=i(n(22));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.default=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),u(n,[{key:"getResolvedState",value:function(e,t){return s({},o.default.compactObject(this.state),o.default.compactObject(this.props),o.default.compactObject(t),o.default.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,i=e.pivotBy,u=void 0===i?[]:i,p=e.data,d=e.resolveData,h=e.pivotIDKey,m=e.pivotValKey,g=e.subRowsKey,v=e.aggregatedKey,y=e.nestingLevelKey,b=e.originalKey,E=e.indexKey,w=e.groupedByPivotKey,P=e.SubComponent,x=!1;r.forEach(function(e){e.columns&&(x=!0)});var C=[].concat(f(r)),N=r.find(function(e){return e.expander||e.columns&&e.columns.some(function(e){return e.expander})});N&&!N.expander&&(N=N.columns.find(function(e){return e.expander})),P&&!N&&(C=[N={expander:!0}].concat(f(C)));var k=[],T=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?s({},n.props.column,n.props.expanderDefaults,e):s({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"==typeof r.accessor){r.id=r.id||r.accessor;var a=r.accessor;return r.accessor=function(e){return o.default.get(e,a)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return k.push(r),r},S=C.map(function(e){return e.columns?s({},e,{columns:e.columns.map(function(t){return T(t,e)})}):T(e)}).slice(),O=[],_=(S=(S=S.map(function(e){if(e.columns){var t=e.columns.filter(function(e){return!(u.indexOf(e.id)>-1)&&o.default.getFirstDefined(e.show,!0)});return s({},e,{columns:t})}return e})).filter(function(e){return e.columns?e.columns.length:!(u.indexOf(e.id)>-1)&&o.default.getFirstDefined(e.show,!0)})).findIndex(function(e){return e.pivot});if(u.length){var D=[];u.forEach(function(e){var t=k.find(function(t){return t.id===e});t&&D.push(t)});var R=D.reduce(function(e,t){return e&&e===t.parentColumn&&t.parentColumn},D[0].parentColumn),M=x&&R.Header,z={Header:M=M||function(){return a.default.createElement("strong",null,"Pivoted")},columns:D.map(function(e){return s({},n.props.pivotDefaults,e,{pivoted:!0})})};_>=0?(z=s({},S[_],z),S.splice(_,1,z)):S.unshift(z)}var F=[],A=[],j=function(e,t){F.push(s({},n.props.column,t,{columns:e})),A=[]};S.forEach(function(e){if(e.columns)return O=O.concat(e.columns),A.length>0&&j(A),void j(e.columns,e);O.push(e),A.push(e)}),x&&A.length>0&&j(A);var H=this.resolvedData;this.resolvedData&&!t||(H=d(p),this.resolvedData=H),H=H.map(function(e,t){return function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(c(r={},b,t),c(r,E,n),c(r,g,t[g]),c(r,y,a),r);return k.forEach(function(e){e.expander||(o[e.id]=e.accessor(t))}),o[g]&&(o[g]=o[g].map(function(t,n){return e(t,n,a+1)})),o}(e,t)});var I=O.filter(function(e){return!e.expander&&e.aggregate});if(u.length){H=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var a=Object.entries(o.default.groupBy(t,n[r])).map(function(e){var t,a=l(e,2),o=a[0],i=a[1];return c(t={},h,n[r]),c(t,m,o),c(t,n[r],o),c(t,g,i),c(t,y,r),c(t,w,!0),t});return a=a.map(function(t){var a,o=e(t[g],n,r+1);return s({},t,(c(a={},g,o),c(a,v,!0),a),function(e){var t={};return I.forEach(function(n){var r=e.map(function(e){return e[n.id]});t[n.id]=n.aggregate(r,e)}),t}(o))})}(H,u)}return s({},e,{resolvedData:H,allVisibleColumns:O,headerGroups:F,allDecoratedColumns:k,hasHeaderGroups:x})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,a=e.defaultFilterMethod,o=e.resolvedData,i=e.allVisibleColumns,l={};return e.allDecoratedColumns.filter(function(e){return e.sortMethod}).forEach(function(e){l[e.id]=e.sortMethod}),{sortedData:t?o:this.sortData(this.filterData(o,r,a,i),n,l)}}},{key:"fireFetchData",value:function(){this.props.onFetchData(this.getResolvedState(),this)}},{key:"getPropOrState",value:function(e){return o.default.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return o.default.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var a=this,o=e;return t.length&&(o=(o=t.reduce(function(e,t){var a=r.find(function(e){return e.id===t.id});if(!a||!1===a.filterable)return e;var o=a.filterMethod||n;return a.filterAll?o(t,e,a):e.filter(function(e){return o(t,e,a)})},o)).map(function(e){return e[a.props.subRowsKey]?s({},e,c({},a.props.subRowsKey,a.filterData(e[a.props.subRowsKey],t,n,r))):e}).filter(function(e){return!e[a.props.subRowsKey]||e[a.props.subRowsKey].length>0})),o}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var a=(this.props.orderByMethod||o.default.orderBy)(e,t.map(function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}}),t.map(function(e){return!e.desc}),this.props.indexKey);return a.forEach(function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))}),a}},{key:"getMinRows",value:function(){return o.default.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,a={page:e};r&&(a.expanded={}),this.setStateWithData(a,function(){return n&&n(e)})}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,a=Math.floor(r/e);this.setStateWithData({pageSize:e,page:a},function(){return t&&t(e,a)})}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,a=n.skipNextSort,i=n.defaultSortDesc,l=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:i,s=!l;if(a)this.setStateWithData({skipNextSort:!1});else{var u=this.props.onSortedChange,c=o.default.clone(r||[]).map(function(e){return e.desc=o.default.isSortingDesc(e),e});if(o.default.isArray(e)){var f=c.findIndex(function(t){return t.id===e[0].id});if(f>-1)c[f].desc===s?t?c.splice(f,e.length):e.forEach(function(e,t){c[f+t].desc=l}):e.forEach(function(e,t){c[f+t].desc=s}),t||(c=c.slice(f,e.length));else c=t?c.concat(e.map(function(e){return{id:e.id,desc:l}})):e.map(function(e){return{id:e.id,desc:l}})}else{var p=c.findIndex(function(t){return t.id===e.id});if(p>-1){var d=c[p];d.desc===s?t?c.splice(p,1):(d.desc=l,c=[d]):(d.desc=s,t||(c=[d]))}else t?c.push({id:e.id,desc:l}):c=[{id:e.id,desc:l}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},function(){return u&&u(c,e,t)})}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,a=(n||[]).filter(function(t){return t.id!==e.id});""!==t&&a.push({id:e.id,value:t}),this.setStateWithData({filtered:a},function(){return r&&r(a,e,t)})}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var a=e.target.parentElement.getBoundingClientRect().width,o=void 0;o=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:o,parentWidth:a}},function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))})}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props.onResizedChange,n=this.getResolvedState(),r=n.resized,a=n.currentlyResizing,o=r.filter(function(e){return e.id!==a.id}),i=void 0;"touchmove"===e.type?i=e.changedTouches[0].pageX:"mousemove"===e.type&&(i=e.pageX);var l=Math.max(a.parentWidth+i-a.startX,11);o.push({id:a.id,value:l}),this.setStateWithData({resized:o},function(){return t&&t(o,e)})}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),n}()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),a=l(n(2)),o=l(n(22)),i=l(n(60));function l(e){return e&&e.__esModule?e:{default:e}}var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var c=function(){return{}};t.default={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return e=null===e||void 0===e?"":e,t=null===t||void 0===t?"":t,(e="string"==typeof e?e.toLowerCase():e)>(t="string"==typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:c,getTableProps:c,getTheadGroupProps:c,getTheadGroupTrProps:c,getTheadGroupThProps:c,getTheadProps:c,getTheadTrProps:c,getTheadThProps:c,getTheadFilterProps:c,getTheadFilterTrProps:c,getTheadFilterThProps:c,getTbodyProps:c,getTrGroupProps:c,getTrProps:c,getTdProps:c,getTfootProps:c,getTfootTrProps:c,getTfootTdProps:c,getPaginationProps:c,getLoadingProps:c,getNoDataProps:c,getResizerProps:c,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,className:"",style:{},getProps:c,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:c,footerClassName:"",footerStyle:{},getFooterProps:c,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",TableComponent:function(e){var t=e.children,n=e.className,o=u(e,["children","className"]);return r.default.createElement("div",s({className:(0,a.default)("rt-table",n),role:"grid"},o),t)},TheadComponent:o.default.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:o.default.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,o=u(e,["children","className"]);return r.default.createElement("div",s({className:(0,a.default)("rt-tr-group",n),role:"rowgroup"},o),t)},TrComponent:function(e){var t=e.children,n=e.className,o=u(e,["children","className"]);return r.default.createElement("div",s({className:(0,a.default)("rt-tr",n),role:"row"},o),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,o=e.children,i=u(e,["toggleSort","className","children"]);return r.default.createElement("div",s({className:(0,a.default)("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},i),o)},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,o=u(e,["toggleSort","className","children"]);return r.default.createElement("div",s({className:(0,a.default)("rt-td",t),role:"gridcell"},o),n)},TfootComponent:o.default.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange;return r.default.createElement("input",{type:"text",style:{width:"100%"},value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return r.default.createElement("div",{className:(0,a.default)("rt-expander",t&&"-open")},"•")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return r.default.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,a=t.filter(function(e){return void 0!==e[n.id]}).map(function(e,a){return r.default.createElement("span",{key:a},e[n.id],a<t.length-1?", ":"")});return r.default.createElement("span",null,a)},PivotComponent:void 0,PaginationComponent:i.default,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,o=e.loadingText,i=u(e,["className","loading","loadingText"]);return r.default.createElement("div",s({className:(0,a.default)("-loading",{"-active":n},t)},i),r.default.createElement("div",{className:"-loading-inner"},o))},NoDataComponent:o.default.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:o.default.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return r.default.createElement("span",null," ")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(0),o=l(a),i=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var c=function(e){return o.default.createElement("button",u({type:"button"},e,{className:"-btn"}),e.children)},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),s(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,a=t.showPageSizeOptions,l=t.pageSizeOptions,s=t.pageSize,u=t.showPageJump,f=t.canPrevious,p=t.canNext,d=t.onPageSizeChange,h=t.className,m=t.PreviousComponent,g=void 0===m?c:m,v=t.NextComponent,y=void 0===v?c:v;return o.default.createElement("div",{className:(0,i.default)(h,"-pagination"),style:this.props.style},o.default.createElement("div",{className:"-previous"},o.default.createElement(g,{onClick:function(){f&&e.changePage(r-1)},disabled:!f},this.props.previousText)),o.default.createElement("div",{className:"-center"},o.default.createElement("span",{className:"-pageInfo"},this.props.pageText," ",u?o.default.createElement("div",{className:"-pageJump"},o.default.createElement("input",{type:""===this.state.page?"text":"number",onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},value:""===this.state.page?"":this.state.page+1,onBlur:this.applyPage,onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()}})):o.default.createElement("span",{className:"-currentPage"},r+1)," ",this.props.ofText," ",o.default.createElement("span",{className:"-totalPages"},n||1)),a&&o.default.createElement("span",{className:"select-wrap -pageSizeOptions"},o.default.createElement("select",{onChange:function(e){return d(Number(e.target.value))},value:s},l.map(function(t,n){return o.default.createElement("option",{key:n,value:t},t," ",e.props.rowsText)})))),o.default.createElement("div",{className:"-next"},o.default.createElement(y,{onClick:function(){p&&e.changePage(r+1)},disabled:!p},this.props.nextText)))}}]),t}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(13));t.default={data:r.default.any,loading:r.default.bool,showPagination:r.default.bool,showPaginationTop:r.default.bool,showPaginationBottom:r.default.bool,showPageSizeOptions:r.default.bool,pageSizeOptions:r.default.array,defaultPageSize:r.default.number,showPageJump:r.default.bool,collapseOnSortingChange:r.default.bool,collapseOnPageChange:r.default.bool,collapseOnDataChange:r.default.bool,freezeWhenExpanded:r.default.bool,sortable:r.default.bool,resizable:r.default.bool,filterable:r.default.bool,defaultSortDesc:r.default.bool,defaultSorted:r.default.array,defaultFiltered:r.default.array,defaultResized:r.default.array,defaultExpanded:r.default.object,defaultFilterMethod:r.default.func,defaultSortMethod:r.default.func,onPageChange:r.default.func,onPageSizeChange:r.default.func,onSortedChange:r.default.func,onFilteredChange:r.default.func,onResizedChange:r.default.func,onExpandedChange:r.default.func,pivotBy:r.default.array,pivotValKey:r.default.string,pivotIDKey:r.default.string,subRowsKey:r.default.string,aggregatedKey:r.default.string,nestingLevelKey:r.default.string,originalKey:r.default.string,indexKey:r.default.string,groupedByPivotKey:r.default.string,onFetchData:r.default.func,className:r.default.string,style:r.default.object,getProps:r.default.func,getTableProps:r.default.func,getTheadGroupProps:r.default.func,getTheadGroupTrProps:r.default.func,getTheadGroupThProps:r.default.func,getTheadProps:r.default.func,getTheadTrProps:r.default.func,getTheadThProps:r.default.func,getTheadFilterProps:r.default.func,getTheadFilterTrProps:r.default.func,getTheadFilterThProps:r.default.func,getTbodyProps:r.default.func,getTrGroupProps:r.default.func,getTrProps:r.default.func,getTdProps:r.default.func,getTfootProps:r.default.func,getTfootTrProps:r.default.func,getTfootTdProps:r.default.func,getPaginationProps:r.default.func,getLoadingProps:r.default.func,getNoDataProps:r.default.func,getResizerProps:r.default.func,columns:r.default.arrayOf(r.default.shape({Cell:r.default.oneOfType([r.default.element,r.default.string,r.default.func]),Header:r.default.oneOfType([r.default.element,r.default.string,r.default.func]),Footer:r.default.oneOfType([r.default.element,r.default.string,r.default.func]),Aggregated:r.default.oneOfType([r.default.element,r.default.string,r.default.func]),Pivot:r.default.oneOfType([r.default.element,r.default.string,r.default.func]),PivotValue:r.default.oneOfType([r.default.element,r.default.string,r.default.func]),Expander:r.default.oneOfType([r.default.element,r.default.string,r.default.func]),Filter:r.default.oneOfType([r.default.element,r.default.func]),sortable:r.default.bool,resizable:r.default.bool,filterable:r.default.bool,show:r.default.bool,minWidth:r.default.number,className:r.default.string,style:r.default.object,getProps:r.default.func,aggregate:r.default.func,headerClassName:r.default.string,headerStyle:r.default.object,getHeaderProps:r.default.func,footerClassName:r.default.string,footerStyle:r.default.object,getFooterProps:r.default.object,filterMethod:r.default.func,filterAll:r.default.bool,sortMethod:r.default.func})),expanderDefaults:r.default.shape({sortable:r.default.bool,resizable:r.default.bool,filterable:r.default.bool,width:r.default.number}),pivotDefaults:r.default.object,previousText:r.default.node,nextText:r.default.node,loadingText:r.default.node,noDataText:r.default.node,pageText:r.default.node,ofText:r.default.node,rowsText:r.default.node,TableComponent:r.default.oneOfType([r.default.func,r.default.element]),TheadComponent:r.default.oneOfType([r.default.func,r.default.element]),TbodyComponent:r.default.oneOfType([r.default.func,r.default.element]),TrGroupComponent:r.default.oneOfType([r.default.func,r.default.element]),TrComponent:r.default.oneOfType([r.default.func,r.default.element]),ThComponent:r.default.oneOfType([r.default.func,r.default.element]),TdComponent:r.default.oneOfType([r.default.func,r.default.element]),TfootComponent:r.default.oneOfType([r.default.func,r.default.element]),FilterComponent:r.default.oneOfType([r.default.func,r.default.element]),ExpanderComponent:r.default.oneOfType([r.default.func,r.default.element]),PivotValueComponent:r.default.oneOfType([r.default.func,r.default.element]),AggregatedComponent:r.default.oneOfType([r.default.func,r.default.element]),PivotComponent:r.default.oneOfType([r.default.func,r.default.element]),PaginationComponent:r.default.oneOfType([r.default.func,r.default.element]),PreviousComponent:r.default.oneOfType([r.default.func,r.default.element]),NextComponent:r.default.oneOfType([r.default.func,r.default.element]),LoadingComponent:r.default.oneOfType([r.default.func,r.default.element]),NoDataComponent:r.default.oneOfType([r.default.func,r.default.element]),ResizerComponent:r.default.oneOfType([r.default.func,r.default.element]),PadRowComponent:r.default.oneOfType([r.default.func,r.default.element])}},function(e,t,n){"use strict";var r=n(63);function a(){}e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=a,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.placements=t.InnerPopper=void 0,t.default=function(e){var t=e.referenceElement,n=(0,r.default)(e,["referenceElement"]);return s.createElement(c.ManagerContext.Consumer,null,function(e){var r=e.referenceNode;return s.createElement(m,(0,a.default)({referenceElement:void 0!==t?t:r},n))})};var r=p(n(65)),a=p(n(23)),o=p(n(24)),i=p(n(25)),l=p(n(26)),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),u=p(n(66)),c=n(27),f=n(31);function p(e){return e&&e.__esModule?e:{default:e}}var d={position:"absolute",top:0,left:0,opacity:0,pointerEvents:"none"},h={},m=t.InnerPopper=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,(0,l.default)((0,i.default)((0,i.default)(t)),"state",{data:void 0,placement:void 0}),(0,l.default)((0,i.default)((0,i.default)(t)),"popperInstance",void 0),(0,l.default)((0,i.default)((0,i.default)(t)),"popperNode",null),(0,l.default)((0,i.default)((0,i.default)(t)),"arrowNode",null),(0,l.default)((0,i.default)((0,i.default)(t)),"setPopperNode",function(e){e&&t.popperNode!==e&&((0,f.safeInvoke)(t.props.innerRef,e),t.popperNode=e,t.updatePopperInstance())}),(0,l.default)((0,i.default)((0,i.default)(t)),"setArrowNode",function(e){t.arrowNode=e}),(0,l.default)((0,i.default)((0,i.default)(t)),"updateStateModifier",{enabled:!0,order:900,fn:function(e){var n=e.placement;return t.setState({data:e,placement:n}),e}}),(0,l.default)((0,i.default)((0,i.default)(t)),"getOptions",function(){return{placement:t.props.placement,eventsEnabled:t.props.eventsEnabled,positionFixed:t.props.positionFixed,modifiers:(0,a.default)({},t.props.modifiers,{arrow:(0,a.default)({},t.props.modifiers&&t.props.modifiers.arrow,{enabled:!!t.arrowNode,element:t.arrowNode}),applyStyle:{enabled:!1},updateStateModifier:t.updateStateModifier})}}),(0,l.default)((0,i.default)((0,i.default)(t)),"getPopperStyle",function(){return t.popperNode&&t.state.data?(0,a.default)({position:t.state.data.offsets.popper.position},t.state.data.styles):d}),(0,l.default)((0,i.default)((0,i.default)(t)),"getPopperPlacement",function(){return t.state.data?t.state.placement:void 0}),(0,l.default)((0,i.default)((0,i.default)(t)),"getArrowStyle",function(){return t.arrowNode&&t.state.data?t.state.data.arrowStyles:h}),(0,l.default)((0,i.default)((0,i.default)(t)),"getOutOfBoundariesState",function(){return t.state.data?t.state.data.hide:void 0}),(0,l.default)((0,i.default)((0,i.default)(t)),"destroyPopperInstance",function(){t.popperInstance&&(t.popperInstance.destroy(),t.popperInstance=null)}),(0,l.default)((0,i.default)((0,i.default)(t)),"updatePopperInstance",function(){t.destroyPopperInstance();var e=(0,i.default)((0,i.default)(t)).popperNode,n=t.props.referenceElement;n&&e&&(t.popperInstance=new u.default(n,e,t.getOptions()))}),(0,l.default)((0,i.default)((0,i.default)(t)),"scheduleUpdate",function(){t.popperInstance&&t.popperInstance.scheduleUpdate()}),t}(0,o.default)(t,e);var n=t.prototype;return n.componentDidUpdate=function(e,t){this.props.placement!==e.placement||this.props.referenceElement!==e.referenceElement||this.props.positionFixed!==e.positionFixed?this.updatePopperInstance():this.props.eventsEnabled!==e.eventsEnabled&&this.popperInstance&&(this.props.eventsEnabled?this.popperInstance.enableEventListeners():this.popperInstance.disableEventListeners()),t.placement!==this.state.placement&&this.scheduleUpdate()},n.componentWillUnmount=function(){(0,f.safeInvoke)(this.props.innerRef,null),this.destroyPopperInstance()},n.render=function(){return(0,f.unwrapArray)(this.props.children)({ref:this.setPopperNode,style:this.getPopperStyle(),placement:this.getPopperPlacement(),outOfBoundaries:this.getOutOfBoundariesState(),scheduleUpdate:this.scheduleUpdate,arrowProps:{ref:this.setArrowNode,style:this.getArrowStyle()}})},t}(s.Component);(0,l.default)(m,"defaultProps",{placement:"bottom",eventsEnabled:!0,referenceElement:void 0,positionFixed:!1});var g=u.default.placements;t.placements=g},function(e,t,n){"use strict";e.exports=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(
/**!
                                                                             * @fileOverview Kickass library to create and place poppers near their reference elements.
                                                                             * @version 1.14.6
                                                                             * @license
                                                                             * Copyright (c) 2016 Federico Zivolo and contributors
                                                                             *
                                                                             * Permission is hereby granted, free of charge, to any person obtaining a copy
                                                                             * of this software and associated documentation files (the "Software"), to deal
                                                                             * in the Software without restriction, including without limitation the rights
                                                                             * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                                                                             * copies of the Software, and to permit persons to whom the Software is
                                                                             * furnished to do so, subject to the following conditions:
                                                                             *
                                                                             * The above copyright notice and this permission notice shall be included in all
                                                                             * copies or substantial portions of the Software.
                                                                             *
                                                                             * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                                                                             * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                                                                             * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                                                                             * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                                                                             * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                                                                             * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
                                                                             * SOFTWARE.
                                                                             */
var r="undefined"!=typeof window&&"undefined"!=typeof document,a=["Edge","Trident","Firefox"],o=0,i=0;i<a.length;i+=1)if(r&&navigator.userAgent.indexOf(a[i])>=0){o=1;break}var l=r&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},o))}};function s(e){return e&&"[object Function]"==={}.toString.call(e)}function u(e,t){if(1!==e.nodeType)return[];var n=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?n[t]:n}function c(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function f(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=u(e),n=t.overflow,r=t.overflowX,a=t.overflowY;return/(auto|scroll|overlay)/.test(n+a+r)?e:f(c(e))}var p=r&&!(!window.MSInputMethodContext||!document.documentMode),d=r&&/MSIE 10/.test(navigator.userAgent);function h(e){return 11===e?p:10===e?d:p||d}function m(e){if(!e)return document.documentElement;for(var t=h(10)?document.body:null,n=e.offsetParent||null;n===t&&e.nextElementSibling;)n=(e=e.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===u(n,"position")?m(n):n:e?e.ownerDocument.documentElement:document.documentElement}function g(e){return null!==e.parentNode?g(e.parentNode):e}function v(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var n=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?e:t,a=n?t:e,o=document.createRange();o.setStart(r,0),o.setEnd(a,0);var i=o.commonAncestorContainer;if(e!==i&&t!==i||r.contains(a))return function(e){var t=e.nodeName;return"BODY"!==t&&("HTML"===t||m(e.firstElementChild)===e)}(i)?i:m(i);var l=g(e);return l.host?v(l.host,t):v(e,g(t).host)}function y(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",n=e.nodeName;if("BODY"===n||"HTML"===n){var r=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||r)[t]}return e[t]}function b(e,t){var n="x"===t?"Left":"Top",r="Left"===n?"Right":"Bottom";return parseFloat(e["border"+n+"Width"],10)+parseFloat(e["border"+r+"Width"],10)}function E(e,t,n,r){return Math.max(t["offset"+e],t["scroll"+e],n["client"+e],n["offset"+e],n["scroll"+e],h(10)?parseInt(n["offset"+e])+parseInt(r["margin"+("Height"===e?"Top":"Left")])+parseInt(r["margin"+("Height"===e?"Bottom":"Right")]):0)}function w(e){var t=e.body,n=e.documentElement,r=h(10)&&getComputedStyle(n);return{height:E("Height",t,n,r),width:E("Width",t,n,r)}}var P=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),C=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function k(e){return N({},e,{right:e.left+e.width,bottom:e.top+e.height})}function T(e){var t={};try{if(h(10)){t=e.getBoundingClientRect();var n=y(e,"top"),r=y(e,"left");t.top+=n,t.left+=r,t.bottom+=n,t.right+=r}else t=e.getBoundingClientRect()}catch(e){}var a={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},o="HTML"===e.nodeName?w(e.ownerDocument):{},i=o.width||e.clientWidth||a.right-a.left,l=o.height||e.clientHeight||a.bottom-a.top,s=e.offsetWidth-i,c=e.offsetHeight-l;if(s||c){var f=u(e);s-=b(f,"x"),c-=b(f,"y"),a.width-=s,a.height-=c}return k(a)}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=h(10),a="HTML"===t.nodeName,o=T(e),i=T(t),l=f(e),s=u(t),c=parseFloat(s.borderTopWidth,10),p=parseFloat(s.borderLeftWidth,10);n&&a&&(i.top=Math.max(i.top,0),i.left=Math.max(i.left,0));var d=k({top:o.top-i.top-c,left:o.left-i.left-p,width:o.width,height:o.height});if(d.marginTop=0,d.marginLeft=0,!r&&a){var m=parseFloat(s.marginTop,10),g=parseFloat(s.marginLeft,10);d.top-=c-m,d.bottom-=c-m,d.left-=p-g,d.right-=p-g,d.marginTop=m,d.marginLeft=g}return(r&&!n?t.contains(l):t===l&&"BODY"!==l.nodeName)&&(d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=y(t,"top"),a=y(t,"left"),o=n?-1:1;return e.top+=r*o,e.bottom+=r*o,e.left+=a*o,e.right+=a*o,e}(d,t)),d}function O(e){if(!e||!e.parentElement||h())return document.documentElement;for(var t=e.parentElement;t&&"none"===u(t,"transform");)t=t.parentElement;return t||document.documentElement}function _(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o={top:0,left:0},i=a?O(e):v(e,t);if("viewport"===r)o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.ownerDocument.documentElement,r=S(e,n),a=Math.max(n.clientWidth,window.innerWidth||0),o=Math.max(n.clientHeight,window.innerHeight||0),i=t?0:y(n),l=t?0:y(n,"left");return k({top:i-r.top+r.marginTop,left:l-r.left+r.marginLeft,width:a,height:o})}(i,a);else{var l=void 0;"scrollParent"===r?"BODY"===(l=f(c(t))).nodeName&&(l=e.ownerDocument.documentElement):l="window"===r?e.ownerDocument.documentElement:r;var s=S(l,i,a);if("HTML"!==l.nodeName||function e(t){var n=t.nodeName;return"BODY"!==n&&"HTML"!==n&&("fixed"===u(t,"position")||e(c(t)))}(i))o=s;else{var p=w(e.ownerDocument),d=p.height,h=p.width;o.top+=s.top-s.marginTop,o.bottom=d+s.top,o.left+=s.left-s.marginLeft,o.right=h+s.left}}var m="number"==typeof(n=n||0);return o.left+=m?n:n.left||0,o.top+=m?n:n.top||0,o.right-=m?n:n.right||0,o.bottom-=m?n:n.bottom||0,o}function D(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var i=_(n,r,o,a),l={top:{width:i.width,height:t.top-i.top},right:{width:i.right-t.right,height:i.height},bottom:{width:i.width,height:i.bottom-t.bottom},left:{width:t.left-i.left,height:i.height}},s=Object.keys(l).map(function(e){return N({key:e},l[e],{area:function(e){return e.width*e.height}(l[e])})}).sort(function(e,t){return t.area-e.area}),u=s.filter(function(e){var t=e.width,r=e.height;return t>=n.clientWidth&&r>=n.clientHeight}),c=u.length>0?u[0].key:s[0].key,f=e.split("-")[1];return c+(f?"-"+f:"")}function R(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(n,r?O(t):v(t,n),r)}function M(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),n=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),r=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+r,height:e.offsetHeight+n}}function z(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function F(e,t,n){n=n.split("-")[0];var r=M(e),a={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),i=o?"top":"left",l=o?"left":"top",s=o?"height":"width",u=o?"width":"height";return a[i]=t[i]+t[s]/2-r[s]/2,a[l]=n===l?t[l]-r[u]:t[z(l)],a}function A(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function j(e,t,n){return(void 0===n?e:e.slice(0,function(e,t,n){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===n});var r=A(e,function(e){return e[t]===n});return e.indexOf(r)}(e,"name",n))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var n=e.function||e.fn;e.enabled&&s(n)&&(t.offsets.popper=k(t.offsets.popper),t.offsets.reference=k(t.offsets.reference),t=n(t,e))}),t}function H(e,t){return e.some(function(e){var n=e.name;return e.enabled&&n===t})}function I(e){for(var t=[!1,"ms","Webkit","Moz","O"],n=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<t.length;r++){var a=t[r],o=a?""+a+n:e;if(void 0!==document.body.style[o])return o}return null}function L(e){var t=e.ownerDocument;return t?t.defaultView:window}function W(e,t,n,r){n.updateBound=r,L(e).addEventListener("resize",n.updateBound,{passive:!0});var a=f(e);return function e(t,n,r,a){var o="BODY"===t.nodeName,i=o?t.ownerDocument.defaultView:t;i.addEventListener(n,r,{passive:!0}),o||e(f(i.parentNode),n,r,a),a.push(i)}(a,"scroll",n.updateBound,n.scrollParents),n.scrollElement=a,n.eventsEnabled=!0,n}function U(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=function(e,t){return L(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}(this.reference,this.state))}function B(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function G(e,t){Object.keys(t).forEach(function(n){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(n)&&B(t[n])&&(r="px"),e.style[n]=t[n]+r})}var K=r&&/Firefox/i.test(navigator.userAgent);function V(e,t,n){var r=A(e,function(e){return e.name===t}),a=!!r&&e.some(function(e){return e.name===n&&e.enabled&&e.order<r.order});if(!a){var o="`"+t+"`",i="`"+n+"`";console.warn(i+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return a}var $=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],Y=$.slice(3);function q(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Y.indexOf(e),r=Y.slice(n+1).concat(Y.slice(0,n));return t?r.reverse():r}var X={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function J(e,t,n,r){var a=[0,0],o=-1!==["right","left"].indexOf(r),i=e.split(/(\+|\-)/).map(function(e){return e.trim()}),l=i.indexOf(A(i,function(e){return-1!==e.search(/,|\s/)}));i[l]&&-1===i[l].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var s=/\s*,\s*|\s+/,u=-1!==l?[i.slice(0,l).concat([i[l].split(s)[0]]),[i[l].split(s)[1]].concat(i.slice(l+1))]:[i];return(u=u.map(function(e,r){var a=(1===r?!o:o)?"height":"width",i=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,i=!0,e):i?(e[e.length-1]+=t,i=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,n,r){var a=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+a[1],i=a[2];if(!o)return e;if(0===i.indexOf("%")){var l=void 0;switch(i){case"%p":l=n;break;case"%":case"%r":default:l=r}return k(l)[t]/100*o}if("vh"===i||"vw"===i)return("vh"===i?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;return o}(e,a,t,n)})})).forEach(function(e,t){e.forEach(function(n,r){B(n)&&(a[t]+=n*("-"===e[r-1]?-1:1))})}),a}var Q={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,n=t.split("-")[0],r=t.split("-")[1];if(r){var a=e.offsets,o=a.reference,i=a.popper,l=-1!==["bottom","top"].indexOf(n),s=l?"left":"top",u=l?"width":"height",c={start:C({},s,o[s]),end:C({},s,o[s]+o[u]-i[u])};e.offsets.popper=N({},i,c[r])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var n=t.offset,r=e.placement,a=e.offsets,o=a.popper,i=a.reference,l=r.split("-")[0],s=void 0;return s=B(+n)?[+n,0]:J(n,o,i,l),"left"===l?(o.top+=s[0],o.left-=s[1]):"right"===l?(o.top+=s[0],o.left+=s[1]):"top"===l?(o.left+=s[0],o.top-=s[1]):"bottom"===l&&(o.left+=s[0],o.top+=s[1]),e.popper=o,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var n=t.boundariesElement||m(e.instance.popper);e.instance.reference===n&&(n=m(n));var r=I("transform"),a=e.instance.popper.style,o=a.top,i=a.left,l=a[r];a.top="",a.left="",a[r]="";var s=_(e.instance.popper,e.instance.reference,t.padding,n,e.positionFixed);a.top=o,a.left=i,a[r]=l,t.boundaries=s;var u=t.priority,c=e.offsets.popper,f={primary:function(e){var n=c[e];return c[e]<s[e]&&!t.escapeWithReference&&(n=Math.max(c[e],s[e])),C({},e,n)},secondary:function(e){var n="right"===e?"left":"top",r=c[n];return c[e]>s[e]&&!t.escapeWithReference&&(r=Math.min(c[n],s[e]-("right"===e?c.width:c.height))),C({},n,r)}};return u.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";c=N({},c,f[t](e))}),e.offsets.popper=c,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,n=t.popper,r=t.reference,a=e.placement.split("-")[0],o=Math.floor,i=-1!==["top","bottom"].indexOf(a),l=i?"right":"bottom",s=i?"left":"top",u=i?"width":"height";return n[l]<o(r[s])&&(e.offsets.popper[s]=o(r[s])-n[u]),n[s]>o(r[l])&&(e.offsets.popper[s]=o(r[l])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var n;if(!V(e.instance.modifiers,"arrow","keepTogether"))return e;var r=t.element;if("string"==typeof r){if(!(r=e.instance.popper.querySelector(r)))return e}else if(!e.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var a=e.placement.split("-")[0],o=e.offsets,i=o.popper,l=o.reference,s=-1!==["left","right"].indexOf(a),c=s?"height":"width",f=s?"Top":"Left",p=f.toLowerCase(),d=s?"left":"top",h=s?"bottom":"right",m=M(r)[c];l[h]-m<i[p]&&(e.offsets.popper[p]-=i[p]-(l[h]-m)),l[p]+m>i[h]&&(e.offsets.popper[p]+=l[p]+m-i[h]),e.offsets.popper=k(e.offsets.popper);var g=l[p]+l[c]/2-m/2,v=u(e.instance.popper),y=parseFloat(v["margin"+f],10),b=parseFloat(v["border"+f+"Width"],10),E=g-e.offsets.popper[p]-y-b;return E=Math.max(Math.min(i[c]-m,E),0),e.arrowElement=r,e.offsets.arrow=(C(n={},p,Math.round(E)),C(n,d,""),n),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(H(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var n=_(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),r=e.placement.split("-")[0],a=z(r),o=e.placement.split("-")[1]||"",i=[];switch(t.behavior){case X.FLIP:i=[r,a];break;case X.CLOCKWISE:i=q(r);break;case X.COUNTERCLOCKWISE:i=q(r,!0);break;default:i=t.behavior}return i.forEach(function(l,s){if(r!==l||i.length===s+1)return e;r=e.placement.split("-")[0],a=z(r);var u=e.offsets.popper,c=e.offsets.reference,f=Math.floor,p="left"===r&&f(u.right)>f(c.left)||"right"===r&&f(u.left)<f(c.right)||"top"===r&&f(u.bottom)>f(c.top)||"bottom"===r&&f(u.top)<f(c.bottom),d=f(u.left)<f(n.left),h=f(u.right)>f(n.right),m=f(u.top)<f(n.top),g=f(u.bottom)>f(n.bottom),v="left"===r&&d||"right"===r&&h||"top"===r&&m||"bottom"===r&&g,y=-1!==["top","bottom"].indexOf(r),b=!!t.flipVariations&&(y&&"start"===o&&d||y&&"end"===o&&h||!y&&"start"===o&&m||!y&&"end"===o&&g);(p||v||b)&&(e.flipped=!0,(p||v)&&(r=i[s+1]),b&&(o=function(e){return"end"===e?"start":"start"===e?"end":e}(o)),e.placement=r+(o?"-"+o:""),e.offsets.popper=N({},e.offsets.popper,F(e.instance.popper,e.offsets.reference,e.placement)),e=j(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,n=t.split("-")[0],r=e.offsets,a=r.popper,o=r.reference,i=-1!==["left","right"].indexOf(n),l=-1===["top","left"].indexOf(n);return a[i?"left":"top"]=o[n]-(l?a[i?"width":"height"]:0),e.placement=z(t),e.offsets.popper=k(a),e}},hide:{order:800,enabled:!0,fn:function(e){if(!V(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,n=A(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<n.top||t.left>n.right||t.top>n.bottom||t.right<n.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var n=t.x,r=t.y,a=e.offsets.popper,o=A(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var i=void 0!==o?o:t.gpuAcceleration,l=m(e.instance.popper),s=T(l),u={position:a.position},c=function(e,t){var n=e.offsets,r=n.popper,a=n.reference,o=-1!==["left","right"].indexOf(e.placement),i=-1!==e.placement.indexOf("-"),l=a.width%2==r.width%2,s=a.width%2==1&&r.width%2==1,u=function(e){return e},c=t?o||i||l?Math.round:Math.floor:u,f=t?Math.round:u;return{left:c(s&&!i&&t?r.left-1:r.left),top:f(r.top),bottom:f(r.bottom),right:c(r.right)}}(e,window.devicePixelRatio<2||!K),f="bottom"===n?"top":"bottom",p="right"===r?"left":"right",d=I("transform"),h=void 0,g=void 0;if(g="bottom"===f?"HTML"===l.nodeName?-l.clientHeight+c.bottom:-s.height+c.bottom:c.top,h="right"===p?"HTML"===l.nodeName?-l.clientWidth+c.right:-s.width+c.right:c.left,i&&d)u[d]="translate3d("+h+"px, "+g+"px, 0)",u[f]=0,u[p]=0,u.willChange="transform";else{var v="bottom"===f?-1:1,y="right"===p?-1:1;u[f]=g*v,u[p]=h*y,u.willChange=f+", "+p}var b={"x-placement":e.placement};return e.attributes=N({},b,e.attributes),e.styles=N({},u,e.styles),e.arrowStyles=N({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){return G(e.instance.popper,e.styles),function(e,t){Object.keys(t).forEach(function(n){!1!==t[n]?e.setAttribute(n,t[n]):e.removeAttribute(n)})}(e.instance.popper,e.attributes),e.arrowElement&&Object.keys(e.arrowStyles).length&&G(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,n,r,a){var o=R(a,t,e,n.positionFixed),i=D(n.placement,o,t,e,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return t.setAttribute("x-placement",i),G(t,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Z=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};P(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(r.update)},this.update=l(this.update.bind(this)),this.options=N({},e.Defaults,a),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=n&&n.jquery?n[0]:n,this.options.modifiers={},Object.keys(N({},e.Defaults.modifiers,a.modifiers)).forEach(function(t){r.options.modifiers[t]=N({},e.Defaults.modifiers[t]||{},a.modifiers?a.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return N({name:e},r.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&s(e.onLoad)&&e.onLoad(r.reference,r.popper,r.options,e,r.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return x(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=R(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=D(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=F(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=j(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,H(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[I("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=W(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return U.call(this)}}]),e}();Z.Utils=("undefined"!=typeof window?window:global).PopperUtils,Z.placements=$,Z.Defaults=Q,t.default=Z},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(0)),a=o(n(68));function o(e){return e&&e.__esModule?e:{default:e}}t.default=r.default.createContext||a.default,e.exports=t.default},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.__esModule=!0;var a=n(0),o=(l(a),l(n(13))),i=l(n(69));l(n(70));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":r(t))&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=1073741823;t.default=function(e,t){var n,r,l="__create-react-context-"+(0,i.default)()+"__",p=function(e){function n(){var t,r;s(this,n);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=r=u(this,e.call.apply(e,[this].concat(o))),r.emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter(function(t){return t!==e})},get:function(){return e},set:function(n,r){e=n,t.forEach(function(t){return t(e,r)})}}}(r.props.value),u(r,t)}return c(n,e),n.prototype.getChildContext=function(){var e;return(e={})[l]=this.emitter,e},n.prototype.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n=this.props.value,r=e.value,a=void 0;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)?(a="function"==typeof t?t(n,r):f,0!=(a|=0)&&this.emitter.set(e.value,a)):a=0}},n.prototype.render=function(){return this.props.children},n}(a.Component);p.childContextTypes=((n={})[l]=o.default.object.isRequired,n);var d=function(t){function n(){var e,r;s(this,n);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=r=u(this,t.call.apply(t,[this].concat(o))),r.state={value:r.getValue()},r.onUpdate=function(e,t){0!=((0|r.observedBits)&t)&&r.setState({value:r.getValue()})},u(r,e)}return c(n,t),n.prototype.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?f:t},n.prototype.componentDidMount=function(){this.context[l]&&this.context[l].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?f:e},n.prototype.componentWillUnmount=function(){this.context[l]&&this.context[l].off(this.onUpdate)},n.prototype.getValue=function(){return this.context[l]?this.context[l].get():e},n.prototype.render=function(){return function(e){return Array.isArray(e)?e[0]:e}(this.props.children)(this.state.value)},n}(a.Component);return d.contextTypes=((r={})[l]=o.default.object,r),{Provider:p,Consumer:d}},e.exports=t.default},function(e,t,n){"use strict";var r="__global_unique_id__";e.exports=function(){return global[r]=(global[r]||0)+1}},function(e,t,n){"use strict";var r=n(71);e.exports=r},function(e,t,n){"use strict";function r(e){return function(){return e}}var a=function(){};a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return l.createElement(u.ManagerContext.Consumer,null,function(t){var n=t.getReferenceRef;return l.createElement(p,(0,r.default)({getReferenceRef:n},e))})};var r=f(n(23)),a=f(n(24)),o=f(n(25)),i=f(n(26)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),s=f(n(73)),u=n(27),c=n(31);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,(0,i.default)((0,o.default)((0,o.default)(t)),"refHandler",function(e){(0,c.safeInvoke)(t.props.innerRef,e),(0,c.safeInvoke)(t.props.getReferenceRef,e)}),t}return(0,a.default)(t,e),t.prototype.render=function(){return(0,s.default)(this.props.getReferenceRef,"`Reference` should not be used outside of a `Manager` component."),(0,c.unwrapArray)(this.props.children)({ref:this.refHandler})},t}(l.Component)},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function a(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function o(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Object.defineProperty(t,"__esModule",{value:!0}),r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,t.polyfill=function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,i=null,l=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?l="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(l="UNSAFE_componentWillUpdate"),null!==n||null!==i||null!==l){var s=e.displayName||e.name,u="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+s+" uses "+u+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+(null!==l?"\n  "+l:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=a),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=o;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,r)}}return e}},function(e,t,n){"use strict";t.__esModule=!0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}},t.classNamesShape=t.timeoutsShape=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(13));var a=r.default.oneOfType([r.default.number,r.default.shape({enter:r.default.number,exit:r.default.number}).isRequired]);t.timeoutsShape=a;var o=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,exit:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterDone:r.default.string,enterActive:r.default.string,exit:r.default.string,exitDone:r.default.string,exitActive:r.default.string})]);t.classNamesShape=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(10)),o=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}a.default.module("grafana.directives").directive("datasourceSelector",function(){return{scope:{datasources:"=",options:"=",onChange:"&"},controller:l,controllerAs:"ctrl",template:'\n<value-select-dropdown\n  variable="ctrl.dsOptions"\n  on-updated="ctrl.onChange(ctrl.dsOptions)"\n  dashboard="ctrl.dashboard">\n</value-select-dropdown>\n'}});var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t;var n=t.datasources,r=t.options;this.dsOptions={multi:!0,current:{value:n,text:n.join(" + ")},options:o.default.map(r,function(e){return{text:e,value:e,selected:o.default.includes(n,e)}})},this.dashboard={on:function(){}}}return e.$inject=["$scope"],r(e,[{key:"onChange",value:function(e){var t=this,n=e.current.value;this.scope.datasources=n,this.scope.$$postDigest(function(){t.scope.onChange()})}}]),e}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(32),i=n.n(o),l=n(2),s=n.n(l),u=n(1),c=n.n(u),f=n(3),p=n.n(f),d=n(9),h=n(8),m=n(4),g=n(14),v=n(5);function y(e){return a.a.createElement("span",{className:"fa-icon-container "+(e.customClass||"")},a.a.createElement("i",{className:"fa fa-"+e.icon}))}function b(e){var t=e.problem,n=e.className,r="1"===t.type,o=t.url&&""!==t.url,i=t.maintenance,l="1"===t.manual_close,s=t.error&&""!==t.error,u="1"===t.state,c="1"===t.correlation_mode,f=t.alerts&&0!==t.alerts.length,p=t.alerts?t.alerts[0].message:"";return a.a.createElement("div",{className:"problem-statusbar "+(n||"")},a.a.createElement(E,{icon:"wrench",fired:i,tooltip:"Host maintenance"}),a.a.createElement(E,{icon:"globe",fired:o,link:o&&t.url,tooltip:"External link"}),a.a.createElement(E,{icon:"bullhorn",fired:r,tooltip:"Trigger generates multiple problem events"}),a.a.createElement(E,{icon:"tag",fired:c,tooltip:"OK event closes problems matched to tag: "+t.correlation_tag}),a.a.createElement(E,{icon:"circle-o-notch",fired:f,tooltip:p}),a.a.createElement(E,{icon:"question-circle",fired:u,tooltip:"Current trigger state is unknown"}),a.a.createElement(E,{icon:"warning",fired:s,tooltip:t.error}),a.a.createElement(E,{icon:"window-close-o",fired:l,tooltip:"Manual close problem"}))}function E(e){var t=e.fired,n=e.icon,r=e.link,o=e.tooltip,i=a.a.createElement("div",{className:"problem-statusbar-item "+(t?"fired":"muted")},a.a.createElement(y,{icon:n}));return o&&t&&(i=a.a.createElement(v.a,{placement:"bottom",content:o},i)),r?a.a.createElement("a",{href:r,target:"_blank"},i):i}function w(e){var t=e.acknowledges;return a.a.createElement("div",{className:"problem-ack-list"},a.a.createElement("div",{className:"problem-ack-col problem-ack-time"},t.map(function(e){return a.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-time"},e.time)})),a.a.createElement("div",{className:"problem-ack-col problem-ack-user"},t.map(function(e){return a.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-user"},e.user)})),a.a.createElement("div",{className:"problem-ack-col problem-ack-message"},t.map(function(e){return a.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-message"},e.message)})))}var P=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},C=Math.round(9.6),N=function(e){function t(t){var n=e.call(this,t)||this;return n.setRootRef=function(e){n.rootRef=e;var t=e&&e.clientWidth||0;n.setState({width:t})},n.handlePointHighlight=function(e,t){var r,a=n.sortedEvents[e],o=n.getRegionToHighlight(e);void 0!==t&&(r=n.getEventDuration(e,t)),n.setState({highlightedEvent:a,showEventInfo:!0,highlightedRegion:o,eventInfo:{duration:r}})},n.handlePointUnHighlight=function(){n.setState({showEventInfo:!1,highlightedRegion:null})},n.handleAckHighlight=function(e,t){n.setState({showEventInfo:!0,eventInfo:{timestamp:Number(e.clock),message:e.message}})},n.handleAckUnHighlight=function(){n.setState({showEventInfo:!1})},n.showEventInfo=function(e){n.setState({highlightedEvent:e,showEventInfo:!0})},n.hideEventInfo=function(){n.setState({showEventInfo:!1})},n.getRegionToHighlight=function(e){return"1"===n.sortedEvents[e].value?e+1:e},n.state={width:0,highlightedEvent:null,highlightedRegion:null,showEventInfo:!1,eventInfo:{}},n}return P(t,e),t.prototype.componentDidUpdate=function(e,t){if(this.rootRef&&t.width!==this.rootRef.clientWidth){var n=this.rootRef.clientWidth;this.setState({width:n})}},t.prototype.getEventDuration=function(e,t){return 1e3*Math.abs(Number(this.sortedEvents[e].clock)-Number(this.sortedEvents[t].clock))},t.prototype.sortEvents=function(){var e=c.a.sortBy(this.props.events,function(e){return Number(e.clock)});return this.sortedEvents=e,e},t.prototype.getEventAcks=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];if(a.acknowledges)for(var o=0,i=a.acknowledges;o<i.length;o++){var l=i[o];t.push(l)}}return c.a.sortBy(t,function(e){return Number(e.clock)})},t.prototype.render=function(){if(!this.rootRef)return a.a.createElement("div",{className:"event-timeline",ref:this.setRootRef});var e=this.props,t=e.timeRange,n=e.eventPointSize,r=e.eventRegionHeight,o=this.sortEvents(),i=this.getEventAcks(o),l=this.state.width+n,s=Math.round(2.5*n),u=l-n,c=Math.round(n/2),f=r/2,p=Math.round(s/2-n/2);return a.a.createElement("div",{className:"event-timeline",ref:this.setRootRef,style:{transform:"translate("+-c+"px, 0)"}},a.a.createElement(T,{className:"timeline-info-container",event:this.state.highlightedEvent,eventInfo:this.state.eventInfo,show:this.state.showEventInfo,left:c}),a.a.createElement("svg",{className:"event-timeline-canvas",viewBox:"0 0 "+l+" "+s},a.a.createElement("defs",null,a.a.createElement(k,null)),a.a.createElement("g",{className:"event-timeline-group",transform:"translate("+c+", "+p+")"},a.a.createElement("g",{className:"event-timeline-regions",filter:"url(#boxShadow)"},a.a.createElement(S,{events:o,timeRange:t,width:u,height:r,highlightedRegion:this.state.highlightedRegion})),a.a.createElement("g",{className:"timeline-acknowledges",transform:"translate(0, "+f+")"},a.a.createElement(D,{acknowledges:i,timeRange:t,width:u,size:n,onHighlight:this.handleAckHighlight,onUnHighlight:this.handleAckUnHighlight})),a.a.createElement("g",{className:"timeline-points",transform:"translate(0, "+f+")"},a.a.createElement(O,{events:o,timeRange:t,width:u,pointSize:n,onPointHighlight:this.handlePointHighlight,onPointUnHighlight:this.handlePointUnHighlight})))))},t.defaultProps={okColor:"rgb(56, 189, 113)",problemColor:"rgb(215, 0, 0)",eventRegionHeight:C,eventPointSize:16},t}(r.PureComponent);function k(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("filter",{id:"dropShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},a.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),a.a.createElement("feOffset",{dx:"1",dy:"1"}),a.a.createElement("feMerge",null,a.a.createElement("feMergeNode",null),a.a.createElement("feMergeNode",{in:"SourceGraphic"}))),a.a.createElement("filter",{id:"boxShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},a.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1"}),a.a.createElement("feComponentTransfer",null,a.a.createElement("feFuncA",{type:"linear",slope:"0.7"})),a.a.createElement("feOffset",{dx:"1",dy:"1"}),a.a.createElement("feMerge",null,a.a.createElement("feMergeNode",null),a.a.createElement("feMergeNode",{in:"SourceGraphic"}))),a.a.createElement("filter",{id:"glowShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},a.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2"}),a.a.createElement("feMerge",null,a.a.createElement("feMergeNode",null),a.a.createElement("feMergeNode",{in:"SourceGraphic"}))),a.a.createElement("filter",{id:"timelinePointBlur",x:"-50%",y:"-50%",width:"200%",height:"200%"},a.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2",result:"blurOut"})))}var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return P(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.event,o=n.eventInfo,i=n.show,l=n.className,s=n.left;if(r){var u=p()(1e3*Number(r.clock)).format("HH:mm:ss");e=[a.a.createElement("span",{key:"ts",className:"event-timestamp"},a.a.createElement("span",{className:"event-timestamp-label"},"Time: "),a.a.createElement("span",{className:"event-timestamp-value"},u))]}if(o&&o.duration){var c=o.duration,f=p.a.utc(c).format("HH:mm:ss");t=a.a.createElement("span",{key:"duration",className:"event-timestamp"},a.a.createElement("span",{className:"event-timestamp-label"},"Duration: "),a.a.createElement("span",{className:"event-timestamp-value"},f))}if(o&&o.timestamp){u=p()(1e3*o.timestamp).format("HH:mm:ss");e=[a.a.createElement("span",{key:"ts",className:"event-timestamp"},a.a.createElement("span",{className:"event-timestamp-label"},"Time: "),a.a.createElement("span",{className:"event-timestamp-value"},u))]}var d={left:s};return i||(d.opacity=0),a.a.createElement("div",{className:l,style:d},a.a.createElement("div",null,e),a.a.createElement("div",null,t),o&&o.message&&a.a.createElement("div",null,a.a.createElement("span",{key:"duration",className:"event-timestamp"},a.a.createElement("span",{className:"event-timestamp-label"},"Message: "),a.a.createElement("span",{className:"event-timestamp-value"},o.message))))},t.defaultProps={left:0,className:"",show:!1},t}(r.PureComponent),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return P(t,e),t.prototype.render=function(){var e,t=this.props,n=t.events,r=t.timeRange,o=t.width,i=t.height,l=t.highlightedRegion,s=r.timeFrom,u=r.timeTo,c=u-s;if(n.length){var f=((n.length?Number(n[0].clock):u)-s)/c,p=Math.round(f*o),d=0===l,h="problem-event-region "+("problem-event--"+("1"!==n[0].value?"problem":"ok"))+" "+(d?"highlighted":""),m={x:0,y:0,width:p,height:i};e=a.a.createElement("rect",x({key:"0",className:h},m))}return[e,n.map(function(e,t){var r=Number(e.clock),f=((t<n.length-1?Number(n[t+1].clock):u)-r)/c,p=Math.round(f*o),d=Math.round((r-s)/c*o),h=l&&l-1===t,m="problem-event-region "+("problem-event--"+("1"===e.value?"problem":"ok"))+" "+(h?"highlighted":""),g={x:d,y:0,width:p,height:i};return a.a.createElement("rect",x({key:e.eventid,className:m},g))})]},t.defaultProps={highlightedRegion:null},t}(r.PureComponent),O=function(e){function t(t){var n=e.call(this,t)||this;return n.bringToFront=function(e,t){void 0===t&&(t=!1);var r=n.props.events.map(function(e,t){return t});r=M(r,e);var a=t?e:null;n.setState({order:r,highlighted:a})},n.highlightPoint=function(e){return function(){var t=[e];if(n.props.onPointHighlight)if(n.props.highlightRegion){var r=2===(t=n.getRegionEvents(e)).length?t[1]:void 0;n.props.onPointHighlight(e,r)}else n.props.onPointHighlight(e);n.bringToFront(t,!0)}},n.unHighlightPoint=function(e){return function(){n.props.onPointUnHighlight&&n.props.onPointUnHighlight();var e=n.props.events.map(function(e,t){return t});n.setState({order:e,highlighted:[]})}},n.state={order:[],highlighted:[]},n}return P(t,e),t.prototype.getRegionEvents=function(e){var t=this.props.events,n=t[e];if("1"===n.value&&e<t.length)for(var r=e;r<t.length;r++){if("0"===t[r].value)return[e,r]}else if("0"===n.value&&e>0){var a=null;for(r=e-1;r>=0&&"1"===t[r].value;r--)a=r;if(null!==a)return[e,a]}return[e]},t.prototype.render=function(){var e=this,t=this.props,n=t.events,r=t.timeRange,o=t.width,i=t.pointSize,l=r.timeFrom,s=r.timeTo-l,u=i/2,c=n.map(function(t,n){var r=Number(t.clock),i=Math.round((r-l)/s*o-u),c="problem-event-item problem-event--"+("1"===t.value?"problem":"ok"),f=-1!==e.state.highlighted.indexOf(n);return a.a.createElement(_,{key:t.eventid,className:c,x:i,r:u,highlighted:f,onPointHighlight:e.highlightPoint(n),onPointUnHighlight:e.unHighlightPoint(n)})});return this.state.order.length?this.state.order.map(function(e){return c[e]}):c},t.defaultProps={highlightRegion:!0},t}(r.PureComponent),_=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMouseOver=function(){n.props.onPointHighlight&&n.props.onPointHighlight()},n.handleMouseLeave=function(){n.props.onPointUnHighlight&&n.props.onPointUnHighlight()},n.state={highlighted:!1},n}return P(t,e),t.prototype.componentDidUpdate=function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})},t.prototype.render=function(){var e=this.props.x,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),o=(this.props.className||"")+" "+(this.state.highlighted?"highlighted":"");return a.a.createElement("g",{className:o,transform:"translate("+n+", 0)",filter:"url(#dropShadow)",onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave},a.a.createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),a.a.createElement("circle",{cx:0,cy:0,r:r,className:"point-core"}))},t}(r.PureComponent),D=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHighlight=function(e){return function(){if(n.props.onHighlight){var t=n.props.acknowledges[e];n.props.onHighlight(t,e)}n.bringToFront(e,!0)}},n.handleUnHighlight=function(){n.props.onUnHighlight&&n.props.onUnHighlight();var e=n.props.acknowledges.map(function(e,t){return t});n.setState({order:e,highlighted:null})},n.bringToFront=function(e,t){void 0===t&&(t=!1);var r=n.props.acknowledges.map(function(e,t){return t});r=M(r,[e]);var a=t?e:null;n.setState({order:r,highlighted:a})},n.state={order:[],highlighted:null},n}return P(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.acknowledges,r=t.timeRange,o=t.width,i=t.size,l=r.timeFrom,s=r.timeTo-l,u=i/2,c=n.map(function(t,n){var r=Number(t.clock),i=Math.round((r-l)/s*o-u),c=e.state.highlighted===n;return a.a.createElement(R,{key:t.eventid,x:i,r:u,highlighted:c,onHighlight:e.handleHighlight(n),onUnHighlight:e.handleUnHighlight})});return this.state.order.length?this.state.order.map(function(e){return c[e]}):c},t}(r.PureComponent),R=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHighlight=function(){n.props.onHighlight&&n.props.onHighlight()},n.handleUnHighlight=function(){n.props.onUnHighlight&&n.props.onUnHighlight()},n.state={highlighted:!1},n}return P(t,e),t.prototype.componentDidUpdate=function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})},t.prototype.render=function(){var e=this.props.x,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),o="problem-event-ack "+(this.state.highlighted?"highlighted":"");return a.a.createElement("g",{className:o,transform:"translate("+n+", 0)",filter:"url(#dropShadow)",onMouseOver:this.handleHighlight,onMouseLeave:this.handleUnHighlight},a.a.createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),a.a.createElement("circle",{cx:0,cy:0,r:r,className:"point-core"}))},t}(r.PureComponent);function M(e,t){var n=c.a.pullAt(e,t);return n.reverse(),e.push.apply(e,n),e}var z=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=function(e){function t(t){var n=e.call(this,t)||this;return n.handleTagClick=function(e,t,r){n.props.onTagClick&&n.props.onTagClick(e,n.props.original.datasource,t,r)},n.ackProblem=function(e){var t=n.props.original;return n.props.onProblemAck(t,e).then(function(e){n.closeAckDialog()}).catch(function(e){console.log(e),n.closeAckDialog()})},n.showAckDialog=function(){n.setState({showAckDialog:!0})},n.closeAckDialog=function(){n.setState({showAckDialog:!1})},n.state={events:[],show:!1,showAckDialog:!1},n}return z(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.showTimeline&&this.fetchProblemEvents(),requestAnimationFrame(function(){e.setState({show:!0})})},t.prototype.fetchProblemEvents=function(){var e=this,t=this.props.original;this.props.getProblemEvents(t).then(function(t){e.setState({events:t})})},t.prototype.render=function(){var e=this,t=this.props.original,n=this.props.rootWidth,r=this.state.show?"show":"",o=n>1200,i=n<800||t.acknowledges&&o&&n<1400,l=p.a.unix(t.lastchangeUnix).fromNow(!0),s=t.acknowledges&&0!==t.acknowledges.length;return a.a.createElement("div",{className:"problem-details-container "+r},a.a.createElement("div",{className:"problem-details"},a.a.createElement("div",{className:"problem-details-row"},a.a.createElement("div",{className:"problem-value-container"},a.a.createElement("div",{className:"problem-age"},a.a.createElement(y,{icon:"clock-o"}),a.a.createElement("span",null,l)),t.items&&a.a.createElement(j,{items:t.items})),a.a.createElement(b,{problem:t,className:i&&"compact"}),a.a.createElement("div",{className:"problem-actions"},a.a.createElement(L,{className:"navbar-button navbar-button--settings",icon:"reply-all",tooltip:"Acknowledge problem",onClick:this.showAckDialog}))),t.comments&&a.a.createElement("div",{className:"problem-description"},a.a.createElement("span",{className:"description-label"},"Description: "),a.a.createElement("span",null,t.comments)),t.tags&&t.tags.length>0&&a.a.createElement("div",{className:"problem-tags"},t.tags&&t.tags.map(function(n){return a.a.createElement(h.a,{key:n.tag+n.value,tag:n,highlight:n.tag===t.correlation_tag,onClick:e.handleTagClick})})),this.props.showTimeline&&this.state.events.length>0&&a.a.createElement(N,{events:this.state.events,timeRange:this.props.timeRange}),s&&!o&&a.a.createElement("div",{className:"problem-ack-container"},a.a.createElement("h6",null,a.a.createElement(y,{icon:"reply-all"})," Acknowledges"),a.a.createElement(w,{acknowledges:t.acknowledges}))),s&&o&&a.a.createElement("div",{className:"problem-details-middle"},a.a.createElement("div",{className:"problem-ack-container"},a.a.createElement("h6",null,a.a.createElement(y,{icon:"reply-all"})," Acknowledges"),a.a.createElement(w,{acknowledges:t.acknowledges}))),a.a.createElement("div",{className:"problem-details-right"},a.a.createElement("div",{className:"problem-details-right-item"},a.a.createElement(y,{icon:"database"}),a.a.createElement("span",null,t.datasource)),t.proxy&&a.a.createElement("div",{className:"problem-details-right-item"},a.a.createElement(y,{icon:"cloud"}),a.a.createElement("span",null,t.proxy)),t.groups&&a.a.createElement(H,{groups:t.groups,className:"problem-details-right-item"}),t.hosts&&a.a.createElement(I,{hosts:t.hosts,className:"problem-details-right-item"})),a.a.createElement(g.a,{withBackdrop:!0,isOpen:this.state.showAckDialog,onSubmit:this.ackProblem,onClose:this.closeAckDialog}))},t}(r.PureComponent);function A(e){var t=e.item,n=e.showName,r=m.expandItemName(t.name,t.key_);return a.a.createElement(v.a,{placement:"bottom",content:r},a.a.createElement("div",{className:"problem-item"},a.a.createElement(y,{icon:"thermometer-three-quarters"}),n&&a.a.createElement("span",{className:"problem-item-name"},t.name,": "),a.a.createElement("span",{className:"problem-item-value"},t.lastvalue)))}var j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.render=function(){var e=this.props.items;return e.length>1?e.map(function(e){return a.a.createElement(A,{item:e,key:e.itemid,showName:!0})}):a.a.createElement(A,{item:e[0]})},t}(r.PureComponent),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.render=function(){var e=this;return this.props.groups.map(function(t){return a.a.createElement("div",{className:e.props.className||"",key:t.groupid},a.a.createElement(y,{icon:"folder"}),a.a.createElement("span",null,t.name))})},t}(r.PureComponent),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return z(t,e),t.prototype.render=function(){var e=this;return this.props.hosts.map(function(t){return a.a.createElement("div",{className:e.props.className||"",key:t.hostid},a.a.createElement(y,{icon:"server"}),a.a.createElement("span",null,t.name))})},t}(r.PureComponent),L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick(e)},t}return z(t,e),t.prototype.render=function(){var e=this.props,t=e.icon,n=e.tooltip,r=e.className,o=a.a.createElement("button",{className:"btn problem-action-button "+(r||""),onClick:this.handleClick},a.a.createElement(y,{icon:t}));return n&&(o=a.a.createElement(v.a,{placement:"bottom",content:n},o)),o},t}(r.PureComponent);function W(e){var t=e.status,n=s()("icon-gf",e.className,{"icon-gf-critical":"critical"===t||"problem"===t},{"icon-gf-warning":"warning"===t},{"icon-gf-online":"online"===t||"ok"===t});return a.a.createElement("i",{className:n})}var U=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},G=function(e){function t(t){var n=e.call(this,t)||this;return n.setRootRef=function(e){n.rootRef=e},n.handleProblemAck=function(e,t){return n.props.onProblemAck(e,t)},n.handlePageSizeChange=function(e,t){n.props.onPageSizeChange&&n.props.onPageSizeChange(e,t)},n.handleResizedChange=function(e,t){n.props.onColumnResize&&n.props.onColumnResize(e)},n.handleExpandedChange=function(e){var t=B({},n.state.expanded);t[n.state.page]=e,n.setState({expanded:t})},n.handleTagClick=function(e,t,r,a){n.props.onTagClick&&n.props.onTagClick(e,t,r,a)},n.getExpandedPage=function(e){return n.state.expanded[e]||{}},n.state={expanded:{},page:0},n}return U(t,e),t.prototype.buildColumns=function(){for(var e=this,t=[],n=this.props.panelOptions,r=n.highlightNewEvents&&n.highlightNewerThan,o=0,i=[{Header:"Host",accessor:"host",show:n.hostField},{Header:"Host (Technical Name)",accessor:"hostTechName",show:n.hostTechNameField},{Header:"Host Groups",accessor:"groups",show:n.hostGroups,Cell:$},{Header:"Proxy",accessor:"proxy",show:n.hostProxy},{Header:"Severity",show:n.severityField,className:"problem-severity",width:120,accessor:function(e){return e.priority},id:"severity",Cell:function(e){return function(e,t,n,r){var o,i=e.original,l=c.a.find(t,function(t){return t.priority===Number(e.original.priority)});o=l.color,n&&i.acknowledges&&i.acknowledges.length&&(o=r);return a.a.createElement("div",{className:"severity-cell",style:{background:o}},l.severity)}(e,n.triggerSeverity,n.markAckEvents,n.ackEventColor)}},{Header:"",id:"statusIcon",show:n.statusIcon,className:"problem-status-icon",width:50,accessor:"value",Cell:function(e){return function(e,t){var n="0"===e.value?"ok":"problem",r=!1;t&&(r=Object(d.b)(e.original,t));var o=s()("zbx-problem-status-icon",{"problem-status--new":r},{"zbx-problem":"1"===e.value},{"zbx-ok":"0"===e.value});return a.a.createElement(W,{status:n,className:o})}(e,r)}},{Header:"Status",accessor:"value",show:n.statusField,width:100,Cell:function(e){return function(e,t,n,r){void 0===t&&(t=K),void 0===n&&(n=V);var o="0"===e.value?"RESOLVED":"PROBLEM",i="0"===e.value?t:n,l=!1;return r&&(l=Object(d.b)(e.original,r)),a.a.createElement("span",{className:l?"problem-status--new":"",style:{color:i}},o)}(e,n.okEventColor,V,r)}},{Header:"Problem",accessor:"description",minWidth:200,Cell:Y},{Header:"Tags",accessor:"tags",show:n.showTags,className:"problem-tags",Cell:function(t){return a.a.createElement(X,B({},t,{onTagClick:e.handleTagClick}))}},{Header:"Age",className:"problem-age",width:100,show:n.ageField,accessor:"lastchangeUnix",id:"age",Cell:q},{Header:"Time",className:"last-change",width:150,accessor:"lastchangeUnix",id:"lastchange",Cell:function(e){return function(e,t){var n=e.original,r=p.a.unix(n.lastchangeUnix),o=t||"DD MMM YYYY HH:mm:ss",i=r.format(o);return a.a.createElement("span",null,i)}(e,n.customLastChangeFormat&&n.lastChangeFormat)}},{Header:"",className:"custom-expander",width:60,expander:!0,Expander:J}];o<i.length;o++){var l=i[o];(l.show||void 0===l.show)&&(delete l.show,t.push(l))}return t},t.prototype.render=function(){var e,t=this,n=this.buildColumns();this.rootWidth=this.rootRef&&this.rootRef.clientWidth;var r=this.props,o=r.pageSize,l=r.fontSize,u=r.panelOptions,f=s()("panel-problems",((e={})["font-size--"+l]=l,e)),p=[5,10,20,25,50,100];return o&&(p.push(o),p=c.a.uniq(c.a.sortBy(p))),a.a.createElement("div",{className:f,ref:this.setRootRef},a.a.createElement(i.a,{data:this.props.problems,columns:n,defaultPageSize:10,pageSize:o,pageSizeOptions:p,resized:u.resizedColumns,minRows:0,loading:this.props.loading,noDataText:"No problems found",SubComponent:function(e){return a.a.createElement(F,B({},e,{rootWidth:t.rootWidth,timeRange:t.props.timeRange,showTimeline:u.problemTimeline,getProblemEvents:t.props.getProblemEvents,onProblemAck:t.handleProblemAck,onTagClick:t.handleTagClick}))},expanded:this.getExpandedPage(this.state.page),onExpandedChange:this.handleExpandedChange,onPageChange:function(e){return t.setState({page:e})},onPageSizeChange:this.handlePageSizeChange,onResizedChange:this.handleResizedChange}))},t}(r.PureComponent);t.default=G;var K="rgb(56, 189, 113)",V="rgb(215, 0, 0)";function $(e){var t="";return e.value&&e.value.length&&(t=e.value.map(function(e){return e.name}).join(", ")),a.a.createElement("span",null,t)}function Y(e){e.original.comments;return a.a.createElement("div",null,a.a.createElement("span",{className:"problem-description"},e.value))}function q(e){var t=e.original,n=p.a.unix(t.lastchangeUnix).fromNow(!0);return a.a.createElement("span",null,n)}var X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTagClick=function(e){t.props.onTagClick&&t.props.onTagClick(e,t.props.original.datasource)},t}return U(t,e),t.prototype.render=function(){var e=this;return[(this.props.value||[]).map(function(t){return a.a.createElement(h.a,{key:t.tag+t.value,tag:t,onClick:e.handleTagClick})})]},t}(r.PureComponent);function J(e){return a.a.createElement("span",{className:e.isExpanded?"expanded":""},a.a.createElement("i",{className:"fa fa-info-circle"}))}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(2),i=n.n(o),l=n(1),s=n.n(l),u=n(3),c=n.n(u),f=n(9),p=n(14),d=n(8),h=n(5),m=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick(e)},t}return m(t,e),t.prototype.render=function(){var e=this.props.problem,t=e.acknowledges&&e.acknowledges.map(function(e){return a.a.createElement("tr",{key:e.acknowledgeid},a.a.createElement("td",null,e.time),a.a.createElement("td",null,e.user),a.a.createElement("td",null,e.message))});return a.a.createElement("div",{className:"ack-tooltip"},a.a.createElement("table",{className:"table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"ack-time"},"Time"),a.a.createElement("th",{className:"ack-user"},"User"),a.a.createElement("th",{className:"ack-comments"},"Comments"))),a.a.createElement("tbody",null,t)),a.a.createElement("div",{className:"ack-add-button"},a.a.createElement("button",{id:"add-acknowledge-btn",className:"btn btn-mini btn-inverse gf-form-button",onClick:this.handleClick},a.a.createElement("i",{className:"fa fa-plus"}))))},t}(r.PureComponent);function v(e){var t=e.problem,n=e.color,r=e.blink,o=e.highlightBackground,l=Number(t.priority),s="";s="1"===t.value?l>=3?"icon-gf-critical":"icon-gf-warning":"icon-gf-online";var u=i()("icon-gf",s,{"zabbix-trigger--blinked":r}),c={};return o||(c.color=n),a.a.createElement("div",{className:"alert-rule-item__icon",style:c},a.a.createElement("i",{className:u}))}var y=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(e){function t(t){var n=e.call(this,t)||this;return n.handleTagClick=function(e){n.props.onTagClick&&n.props.onTagClick(e,n.props.problem.datasource)},n.ackProblem=function(e){var t=n.props.problem;return n.props.onProblemAck(t,e).then(function(e){n.closeAckDialog()}).catch(function(e){console.log(e),n.closeAckDialog()})},n.showAckDialog=function(){n.setState({showAckDialog:!0})},n.closeAckDialog=function(){n.setState({showAckDialog:!1})},n.state={showAckDialog:!1},n}return y(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.problem,r=t.panelOptions,o=i()("alert-rule-item","zbx-trigger-card",{"zbx-trigger-highlighted":r.highlightBackground}),l=i()("alert-rule-item__text",{"zbx-description--newline":r.descriptionAtNewLine}),u=s.a.find(r.triggerSeverity,function(e){return e.priority===Number(n.priority)}),m=Object(f.a)(n.lastchangeUnix,r.customLastChangeFormat&&r.lastChangeFormat),g=c.a.unix(n.lastchangeUnix).fromNow(!0),y=!1;r.highlightNewerThan&&(y=Object(f.b)(n,r.highlightNewerThan));var b,N=r.highlightNewEvents&&y;b="0"===n.value?r.okEventColor:r.markAckEvents&&n.acknowledges&&n.acknowledges.length?r.ackEventColor:u.color;var k={};return r.highlightBackground&&(k.backgroundColor=b),a.a.createElement("li",{className:o,style:k},a.a.createElement(v,{problem:n,color:b,highlightBackground:r.highlightBackground,blink:N}),a.a.createElement("div",{className:"alert-rule-item__body"},a.a.createElement("div",{className:"alert-rule-item__header"},a.a.createElement("div",{className:"alert-rule-item__name"},a.a.createElement("span",{className:"zabbix-trigger-name"},n.description),(r.hostField||r.hostTechNameField)&&a.a.createElement(E,{problem:n,panelOptions:r}),r.hostGroups&&a.a.createElement(w,{problem:n,panelOptions:r}),r.showTags&&a.a.createElement("span",{className:"zbx-trigger-tags"},n.tags&&n.tags.map(function(t){return a.a.createElement(d.a,{key:t.tag+t.value,tag:t,highlight:t.tag===n.correlation_tag,onClick:e.handleTagClick})}))),a.a.createElement("div",{className:l},r.statusField&&a.a.createElement(P,{problem:n,blink:N}),r.severityField&&a.a.createElement(x,{severityDesc:u,blink:N,highlightBackground:r.highlightBackground}),a.a.createElement("span",{className:"alert-rule-item__time"},r.ageField&&"for "+g),r.descriptionField&&!r.descriptionAtNewLine&&a.a.createElement("span",{className:"zbx-description",dangerouslySetInnerHTML:{__html:n.comments}})),r.descriptionField&&r.descriptionAtNewLine&&a.a.createElement("div",{className:"alert-rule-item__text"},a.a.createElement("span",{className:"alert-rule-item__info zbx-description zbx-description--newline",dangerouslySetInnerHTML:{__html:n.comments}})))),r.datasources.length>1&&a.a.createElement("div",{className:"alert-rule-item__time zabbix-trigger-source"},a.a.createElement("span",null,a.a.createElement("i",{className:"fa fa-database"}),n.datasource)),a.a.createElement("div",{className:"alert-rule-item__time zbx-trigger-lastchange"},a.a.createElement("span",null,m||"last change unknown"),a.a.createElement("div",{className:"trigger-info-block zbx-status-icons"},n.url&&a.a.createElement("a",{href:n.url,target:"_blank"},a.a.createElement("i",{className:"fa fa-external-link"})),"1"===n.state&&a.a.createElement(h.a,{placement:"bottom",content:n.error},a.a.createElement("span",null,a.a.createElement("i",{className:"fa fa-question-circle"}))),n.lastEvent&&a.a.createElement(C,{problem:n,onClick:this.showAckDialog}))),a.a.createElement(p.a,{withBackdrop:!0,isOpen:this.state.showAckDialog,onSubmit:this.ackProblem,onClose:this.closeAckDialog}))},t}(r.PureComponent);function E(e){var t=e.problem,n=e.panelOptions,r="";return n.hostField&&n.hostTechNameField?r=t.host+" ("+t.hostTechName+")":(n.hostField||n.hostTechNameField)&&(r=n.hostField?t.host:t.hostTechName),n.hostProxy&&t.proxy&&(r=t.proxy+": "+r),a.a.createElement("span",{className:"zabbix-hostname"},t.maintenance&&a.a.createElement("i",{className:"fa fa-wrench zbx-maintenance-icon"}),r)}function w(e){var t=e.problem,n="";e.panelOptions.hostGroups&&(n+="[ "+s.a.map(t.groups,"name").join(", ")+" ]");return a.a.createElement("span",{className:"zabbix-hostname"},n)}function P(e){var t=e.problem,n=e.okColor,r=e.problemColor,o=e.blink,l="0"===t.value?"RESOLVED":"PROBLEM",s=(t.value,i()("zbx-trigger-state",{"alert-state-critical":"1"===t.value},{"alert-state-ok":"0"===t.value},{"zabbix-trigger--blinked":o}));return a.a.createElement("span",{className:s},l)}function x(e){var t=e.severityDesc,n=e.highlightBackground,r=e.blink,o=i()("zbx-trigger-severity",{"zabbix-trigger--blinked":r}),l={};return n||(l.color=t.color),a.a.createElement("span",{className:o,style:l},t.severity)}var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick(e)},t.renderTooltipContent=function(){return a.a.createElement(g,{problem:t.props.problem,onClick:t.handleClick})},t}return y(t,e),t.prototype.render=function(){var e=this.props.problem;return e.acknowledges&&e.acknowledges.length?a.a.createElement(h.a,{placement:"bottom",popperClassName:"ack-tooltip",content:this.renderTooltipContent},a.a.createElement("span",null,a.a.createElement("i",{className:"fa fa-comments"}))):a.a.createElement(h.a,{placement:"bottom",content:"Acknowledge problem"},a.a.createElement("span",{role:"button",onClick:this.handleClick},a.a.createElement("i",{className:"fa fa-comments-o"})))},t}(r.PureComponent),N=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(t){var n=e.call(this,t)||this;return n.handlePageChange=function(e){var t=n.getCurrentProblems(e);n.setState({page:e,currentProblems:t})},n.handleTagClick=function(e,t){n.props.onTagClick&&n.props.onTagClick(e,t)},n.handleProblemAck=function(e,t){return n.props.onProblemAck(e,t)},n.state={page:0,currentProblems:n.getCurrentProblems(0)},n}return N(t,e),t.prototype.getCurrentProblems=function(e){var t=this.props,n=t.pageSize,r=t.problems,a=n*e,o=Math.min(n*(e+1),r.length);return this.props.problems.slice(a,o)},t.prototype.render=function(){var e,t=this,n=this.props,r=n.problems,o=n.panelOptions,l=this.getCurrentProblems(this.state.page),s=parseInt(o.fontSize.slice(0,o.fontSize.length-1),10);s=s&&100!==s?s:null;var u=i()("alert-rule-list",((e={})["font-size--"+s]=s,e));return a.a.createElement("div",{className:"triggers-panel-container",key:"alertListContainer"},a.a.createElement("section",{className:"card-section card-list-layout-list"},a.a.createElement("ol",{className:u},l.map(function(e){return a.a.createElement(b,{key:e.triggerid,problem:e,panelOptions:o,onTagClick:t.handleTagClick,onProblemAck:t.handleProblemAck})}))),a.a.createElement("div",{className:"triggers-panel-footer",key:"alertListFooter"},a.a.createElement(T,{itemsLength:r.length,pageSize:this.props.pageSize,pageIndex:this.state.page,onPageChange:this.handlePageChange})))},t}(r.PureComponent),T=(t.default=k,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePageChange=function(e){return function(){t.props.onPageChange(e)}},t}return N(t,e),t.prototype.render=function(){var e=this.props,t=e.itemsLength,n=e.pageIndex,r=e.pageSize,o=Math.ceil(t/r);if(1===o)return a.a.createElement("ul",null);for(var l=Math.max(n-3,0),s=Math.min(o,l+9),u=[],c=l;c<s;c++){var f=i()("triggers-panel-page-link","pointer",{active:c===n}),p=c+1,d=a.a.createElement("li",{key:p.toString()},a.a.createElement("a",{className:f,onClick:this.handlePageChange(c)},p));u.push(d)}return a.a.createElement("ul",null,u)},t}(r.PureComponent))}])});
//# sourceMappingURL=module.js.map